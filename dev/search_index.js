var documenterSearchIndex = {"docs":
[{"location":"fieldrepresentations/#fieldrepresentation","page":"General Field Representation Interface","title":"Representation of Antenna Fields","text":"","category":"section"},{"location":"fieldrepresentations/","page":"General Field Representation Interface","title":"General Field Representation Interface","text":"The electromagnetic fields of an antenna can be represented in various ways. Some of the most important field representations known from literature are implemented in AntennaFieldRepresentations.jl. ","category":"page"},{"location":"fieldrepresentations/","page":"General Field Representation Interface","title":"General Field Representation Interface","text":"The core of AntennaFieldRepresentations.jl revolves around implemantations of the abstract type AntennaFieldRepresentation. Implementations of the type AntennaFieldRepresentation provide equivalent representations of the electromagnetic fields of an antenna (in a certain region of space where the representation converges). Each instance of AntennaFieldRepresentation is a discretized version of the antenna fields, i.e., a collection of coefficients from which the antenna fields can be (approximately) calculated. One of the imperatives behind AntennaFieldRepresentations.jl is that an AntennaFieldRepresentation behaves like an AbstractVector{C} with extra context. In particular, the wavenumber of the radiation frequency of the antenna field is stored in the AntennaFieldRepresentation.","category":"page"},{"location":"fieldrepresentations/","page":"General Field Representation Interface","title":"General Field Representation Interface","text":"tip: Tip\nImplementations of the type AntennaFieldrepresentation support the interface of Base.AbstractVector. In particular the methods Base.getindex and Base.setindex! are supported which allow to access the coefficient vector by indexing the struct representing the fields directly by square brackets [].","category":"page"},{"location":"fieldrepresentations/","page":"General Field Representation Interface","title":"General Field Representation Interface","text":"","category":"page"},{"location":"fieldrepresentations/#Three-Different-Propagation-Types-of-AntennaFieldRepresentation","page":"General Field Representation Interface","title":"Three Different Propagation Types of AntennaFieldRepresentation","text":"","category":"section"},{"location":"fieldrepresentations/","page":"General Field Representation Interface","title":"General Field Representation Interface","text":"AntennaFieldRepresentations come in up to three different propagation types. For indicating the propagation type of a concrete AntennaFieldRepresentation-type, we use the singleton-types ","category":"page"},{"location":"fieldrepresentations/","page":"General Field Representation Interface","title":"General Field Representation Interface","text":"Radiated,\nAbsorbed,\nor Incident,","category":"page"},{"location":"fieldrepresentations/","page":"General Field Representation Interface","title":"General Field Representation Interface","text":"although not every implementation of AntennaFieldRepresentation will support all three variants. ","category":"page"},{"location":"fieldrepresentations/","page":"General Field Representation Interface","title":"General Field Representation Interface","text":"Internally, Radiated, Absorbed, or Incident are represented by singleton types, which all subtype the abstract type PropagationType. The PropagationType is stored as the parameter P in the type definition of AntennaFieldRepresentation{P, C} to allow for efficient dispatch of methods implementing the AntennaFieldRepresentation interface (the other parameter C denotes the element type of the coefficient vector).","category":"page"},{"location":"fieldrepresentations/#AntennaFieldRepresentation-Interface","page":"General Field Representation Interface","title":"AntennaFieldRepresentation Interface","text":"","category":"section"},{"location":"fieldrepresentations/","page":"General Field Representation Interface","title":"General Field Representation Interface","text":"Any subtype of AntennaFieldrepresentation implements the following methods[1]:","category":"page"},{"location":"fieldrepresentations/","page":"General Field Representation Interface","title":"General Field Representation Interface","text":"Method name Optional Fallback method Short Description\nBase.size No  See interface of Base.AbstractVector\nBase.getindex No  See interface of Base.AbstractVector\nBase.setindex! No  See interface of Base.AbstractVector\nBase.similar No  See interface of Base.AbstractVector\nasvector No  Return the coefficients as a vector\n   \nefield Yes efield! Return the E-field vector at given location\nefield! No  In-place version of efield\nhfield Yes hfield! Return the H-field vector at given location\nhfield! No  In-place version of hfield\nehfield Yes ehfield! Simulataneous calculation of E-field and H-field\nehfield! Yes efield!, hfield! In-place version of ehfield\nfarfield No  Return the farfield vector at given direction\n   \ngetwavenumber No  Return the wavenumber of the radiation frequency\nsetwavenumber! No  Set the wavenumber of the radiation frequency\nrotate Yes rotate! Rotate the representation by the Euler angles χ, θ, ϕ\nrotate! No  In-place version of rotate\nspatialshift Yes spatialshift! Spatially shift representation to new location R\nspatialshift! No  In-place version of spatialshift\n   \nequivalentorder No  Return the estimated spherical mode order L of the representation\n   \nchangerepresentation Yes  Change the representation type. Not all resulting types are supported\ntransmit No  Calculate transmission between AUT and field sampling","category":"page"},{"location":"fieldrepresentations/","page":"General Field Representation Interface","title":"General Field Representation Interface","text":"[1]: Note for developers: If you want to implement your own subtype of AntennaFieldrepresentation, make sure to support this interface to adhere to the general functionality of this package.","category":"page"},{"location":"operations/interpolation/#Interpolation-of-PlaneWaveExpansions-and-SphericalFieldSamplings","page":"Interpolation","title":"Interpolation of PlaneWaveExpansions and SphericalFieldSamplings","text":"","category":"section"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"A very useful operation on a spherically sampled data structure (i.e., a PlaneWaveExpansion or a SphericalFieldSampling) is interpolation (have a look at the theory section for background information on how the interpolation works internally). For any function bmf(vartheta varphi) on the sphere[1], sampled at finitely many sampling points (vartheta_i varphi_i), we want to be able to find the function value at any point (vartheta varphi) which does not necessarily coincide with a point from the set of previously sampled points. ","category":"page"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"In particular, if the function bmf(vartheta varphi) is sampled according to a certain SphereSamplingStrategy, we want to be able to resample the function according to a different SphereSamplingStrategy. This resampling step is often referred to as interpolation in other works, but in the context of AntennaFieldRepresentations.jl, we are a bit more careful with our wording. In AntennafieldRepresentations.jl ","category":"page"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"the term interpolation means to evaluate a function bmf(vartheta varphi) on the sphere, sampled according to some SphereSamplingStrategy, at arbitrary other sampling points (vartheta varphi)\nthe term resampling means to find the values bmf(vartheta_i varphi_i) of a function on the sphere, sampled according to a certain SphereSamplingStrategy B, from the values bmf(vartheta_k varphi_k) of the same function, sampled according to another SphereSamplingStrategy A - i.e., after the resampling process, the spherical function bmf(vartheta varphi) which was sampled according to SphereSamplingStrategy A, is now sampled according to SphereSamplingStrategy B.","category":"page"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"[1]: The function bmf(vartheta varphi) is displayed with a bold bmf to indicate its vector character. All spherically sampled data structures to be interpolated in AntennaFieldRepresentations.jl have two components representing two independent polarizations of the electromagnetic field.","category":"page"},{"location":"operations/interpolation/#Interpolating-Spherically-Sampled-Data-at-Arbitrary-Sampling-Points","page":"Interpolation","title":"Interpolating Spherically Sampled Data at Arbitrary Sampling Points","text":"","category":"section"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"We can interpolate spherically sampled data at arbitrary sampling points by using the interpolate method or an InterpolateMap. ","category":"page"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"The basic usage of the interpolate method is simple (expand \"Setup Code\" to see how the input data is generated):","category":"page"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"<details closed><summary>Setup Code</summary>","category":"page"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"#########################################\n#                   Setup\n#                     |\n#                     V\n#########################################\nusing AntennaFieldRepresentations\nZ₀=376.730313669;                       # free-space wave impedance\nf= 1.5e9;                               # frequency\nλ = AntennaFieldRepresentations.c₀ / f; # wavelength\nk0 = 2 * pi / λ;                        # wavenumber\n\n# setup arbitrary AUT field\ncoeffs = zeros(ComplexF64, 30) # coefficients up to order ℓ=3\ncoeffs[1:16] = ComplexF64.(collect(1:16)) # populate coefficients up to order ℓ=2\nsph_coefficients= SphericalCoefficients(coeffs)\nswe= SphericalWaveExpansion(Radiated(),sph_coefficients, k0)\n\n# Convert to PlaneWaveExpansion, by default sampled according to GaussLegendreθRegularϕSampling\npwe = changerepresentation(PlaneWaveExpansion, swe)\n\n\n# Define spherical sampling strategy\n_, Lmax, __ =j_to_sℓm(length(swe)); # maximum mode order\nαinc=AntennaFieldRepresentations.αinc_dipole(1.0, Lmax, k0) # spherical coefficients of incident field Hertzian dipole at 1.0m distance\nJθ= 2*Lmax + 1;\nJϕ= 2*Lmax + 1;\nsamplingstrategy= RegularθRegularϕSampling(Jθ, Jϕ) \n\n# initialize empty spherical field sampling\nfieldsampling = SphericalFieldSampling(samplingstrategy, αinc);\n# fill fieldsampling with values\nfieldsampling .= transmit(swe, fieldsampling)\n###########################################\n#                     ^\n#                     |\n#                    Setup\n###########################################","category":"page"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"</details>","category":"page"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"# pwe is a PlaneWaveExpansion{Radiated}\n\n# Arbitrary position\nθ=pi/10\nϕ= pi/7.8\n\n# Actual values at this position\nEθ, Eϕ = -59.44801130097685 + 58.38482519439182im, 68.0278816964276 + 75.60985071712197im\n\n# interpolate pwe at new position\nnewEθ, newEϕ = interpolate(pwe, (θ,ϕ))\n\n\nabs(Eθ - newEθ) / abs(Eθ) < 0.0055 # true\nabs(Eϕ - newEϕ) / abs(Eϕ) < 0.0044  # true","category":"page"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"The default interpolation method uses (approximate) local interpolation with an interpolation order of orderθ = 12 along θ and orderϕ = 12 along ϕ.  For better interpolation accuracy, we can specify the keyword arguments orderθ and orderϕ","category":"page"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"# interpolate pwe at new position with better accuracy\nnewEθ, newEϕ = interpolate(pwe, (θ,ϕ), orderθ = 18, orderϕ = 18)\n\nabs(Eθ - newEθ) / abs(Eθ) < 0.00055 # true\nabs(Eϕ - newEϕ) / abs(Eϕ) < 0.00044  # true","category":"page"},{"location":"operations/interpolation/#Resampling-Spherically-Sampled-Data-According-to-a-New-SphereSamplingStrategy","page":"Interpolation","title":"Resampling Spherically Sampled Data According to a New SphereSamplingStrategy","text":"","category":"section"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"We can resample spherically sampled data to a new SphereSamplingStrategy using the [resample] method or a ResampleMap. ","category":"page"},{"location":"operations/interpolation/","page":"Interpolation","title":"Interpolation","text":"# define the target samplingstrategy\ntargetsamplingstrategy= RegularθRegularϕSampling(20, 20) \n\npwe2= resample(targetsamplingstrategy, pwe)","category":"page"},{"location":"sampling/irregularsampling/#irregularsampling","page":"Irregularly Distributed Field Samplings","title":"Irregularly Distributed Field Samplings","text":"","category":"section"},{"location":"sampling/irregularsampling/","page":"Irregularly Distributed Field Samplings","title":"Irregularly Distributed Field Samplings","text":"The most general FieldSampling in AntennaFieldRepresentations.jl is the IrregularFieldSampling.  It allows to sample the antenna field at arbitrary positions with arbitrary probe antennas. The user must specify","category":"page"},{"location":"sampling/irregularsampling/","page":"Irregularly Distributed Field Samplings","title":"Irregularly Distributed Field Samplings","text":"a list of measurement positions \na vector of probe antennas which are used in the measurement scenario\na list of probe IDs to assign the utilized probe to each measurement position\na list of Euler angles vartheta, varphi, chi to define the probe rotation at each measurement position","category":"page"},{"location":"sampling/irregularsampling/#probeantenna","page":"Irregularly Distributed Field Samplings","title":"Probe Antenna","text":"","category":"section"},{"location":"sampling/irregularsampling/","page":"Irregularly Distributed Field Samplings","title":"Irregularly Distributed Field Samplings","text":"For the definition of a probe antenna, AntennaFieldRepresentations.jl provides the type ProbeAntenna. The ProbeAntenna type is a thin wrapper around any radiating AntennaFieldRepresentation. A ProbeAntenna object can be generated by ProbeAntenna(aut_field, size) where ","category":"page"},{"location":"sampling/irregularsampling/","page":"Irregularly Distributed Field Samplings","title":"Irregularly Distributed Field Samplings","text":"aut_field <: AntennaFieldRepresentation{Radiating, C<: ComplexF64} may be anyAntennaFieldRepresentation of radiating type \nsize <: Real is a real number denotig the physical size of the probe antenna in terms of the radius of the smallest sphere enclosing the complete probe antenna.","category":"page"},{"location":"sampling/irregularsampling/#Constructors-of-IrregularFieldSampling","page":"Irregularly Distributed Field Samplings","title":"Constructors of IrregularFieldSampling","text":"","category":"section"},{"location":"sampling/irregularsampling/","page":"Irregularly Distributed Field Samplings","title":"Irregularly Distributed Field Samplings","text":"note: Note\nComing soon ...","category":"page"},{"location":"sampling/irregularsampling/","page":"Irregularly Distributed Field Samplings","title":"Irregularly Distributed Field Samplings","text":"","category":"page"},{"location":"sampling/irregularsampling/#E-Field-and-H-Field-Requests","page":"Irregularly Distributed Field Samplings","title":"E-Field and H-Field Requests","text":"","category":"section"},{"location":"sampling/irregularsampling/","page":"Irregularly Distributed Field Samplings","title":"Irregularly Distributed Field Samplings","text":"Since unfiltered sampling of the electric or magnetic field of an AntennaFieldRepresentation at given measurement locations is a common use case, a convenience constructor is provided by AntennaFieldRepresentations.jl for these cases. The methods EfieldSampling(positions::Vector{V}) and HfieldSampling(positions::Vector{V}) return IrregularFieldSamplings which correspond to sampling the field of an AntennaFieldRepresentation at given positions with Hertzian dipole probes or Fitzgerald dipole probes respectively.","category":"page"},{"location":"dipoles/dipole_theory/#Electromagnetic-Fields-of-Elementary-Dipoles","page":"Dipoles","title":"Electromagnetic Fields of Elementary Dipoles","text":"","category":"section"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"The radiated fields of an antenna can be approximated by the fields of elementary dipoles, i.e., the fields of very short electrical dipoles (so-called Hertzian dipoles) and very short magnetic dipoles (so-called Fitzgerald dipoles).","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"Since the equivalent current densities for these very short elementary dipoles are particularly simple, it is possible to find analytical expressions for their respective fields using Green's functions.","category":"page"},{"location":"dipoles/dipole_theory/#dipole_radiated","page":"Dipoles","title":"Radiated Fields","text":"","category":"section"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"For a general source, consisting of an electric volume current distribution bmJ(bmr) and a magnetic current distribution bmM(bmr), the radiated electric and magnetic fields can be described by ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmE(bmr)=\niiint limits_V_textsrc\nleft\nbmmathcalG_JE\n(bmrbmr)\ncdot\nbmJ(bmr)\n+\nbmmathcalG_ME\n(bmrbmr)\ncdot\nbmM(bmr)\nright mathrmdv ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"and","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmH(bmr)=\niiint limits_V_textsrc\nleft\nbmmathcalG_JH\n(bmrbmr)\ncdot\nbmJ(bmr)\n+\nbmmathcalG_MH\n(bmrbmr)\ncdot\nbmM(bmr)\nright mathrmdv  ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"where ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmmathcalG_JE=\n-mathrmj k_0 Z_mathrmF\nleft\nleft(mathbfI +dfrac1k^2 nabla nablaright) g_0(bmrbmr)\nright","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmmathcalG_ME=\n-nabla g_0(bmrbmr) times mathbfI","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmmathcalG_JH=\nnabla g_0(bmrbmr) times mathbfI","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmmathcalG_MH=\n-mathrmj dfrack_0Z_mathrmF\nleft\nleft(mathbfI +dfrac1k^2 nabla nablaright) g_0(bmrbmr)\nright","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"are the dyadic Green's functions derived from the scalar greens function","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":" g_0(bmrbmr)\n=\ndfracmathrme^-mathrmjk_0 bmr-bmr4pi bmr-bmr ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"The involved dyadic operators have the explicit expressions","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"left(mathbfI +dfrac1k^2 nabla nablaright) g_0(bmrbmr)\n=\nleft(\ndfrac3k^2bmr-bmr^2\n+\ndfrac3mathrmjkbmr-bmr \n-1   \nright)\ng_0(bmrbmr)\n\nbme_r bme_r \n-\nleft(\ndfracmathrmjkbmr-bmr\n+dfrac1k^2bmr-bmr^2\n-1\nright)\ng_0(bmrbmr)\n\nmathbfI","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"and","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"nabla g_0(bmrbmr) times mathbfI\n=\nleft(-mathrmjk-dfrac1bmr-bmrright) bme_r times mathbfI ","category":"page"},{"location":"dipoles/dipole_theory/#Radiated-Fields-of-a-Hertzian-Dipole","page":"Dipoles","title":"Radiated Fields of a Hertzian Dipole","text":"","category":"section"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"A Hertzian dipole is a model for an elementary electric dipole. Formally, it can be regardes as a special electric current distribution of the form","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmJ_textHertz(bmr)\n=\nIbmell\n\ndelta(bmr-bmr) ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"where I has the unit Ampère and denotes the excitation of the dipole, bmell denotes the oriented dipole length and delta(bmr-bmr) is the Dirac-Delta distribution. In the idealized model, bmell tends to zero, while I increases such that the product Ibmell remains constant. Using the dyadic Green's functions from above, the fields of a Hertzian dipole can be calculated as","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmE_textHertz(bmr)\n=\n-mathrmj k_0 Z_mathrmF I\nleft\nleft(\ndfrac3k^2bmr-bmr^2\n+\ndfrac3mathrmjkbmr-bmr \n-1   \nright)\ng_0(bmrbmr)\n\nbme_r left(bme_r cdot bmellright)\n-\nleft(\ndfracmathrmjkbmr-bmr\n+dfrac1k^2bmr-bmr^2\n-1\nright)\ng_0(bmrbmr)\n\nbmell\nright","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"and ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmH_textHertz(bmr)\n=I\nleft(-mathrmjk-dfrac1bmr-bmrright) bme_r times bmell ","category":"page"},{"location":"dipoles/dipole_theory/#Radiated-Fields-of-a-Fitzgerald-Dipole","page":"Dipoles","title":"Radiated Fields of a Fitzgerald Dipole","text":"","category":"section"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"A Fitzgerald dipole is a model for an elementary magnetic dipole. Formally, it can be regardes as a special magnetic current distribution of the form","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmM_textFitzgerald(bmr)\n=\nI_mathrmmbmell\n\ndelta(bmr-bmr) ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"where I_m has the unit Volt and denotes the excitation of the dipole, bmell denotes the oriented dipole length and delta(bmr-bmr) is the Dirac-Delta distribution. In the idealized model, bmell tends to zero, while I_mathrmm increases such that the product I_mathrmmbmell remains constant. Using the dyadic Green's functions from above, the fields of a Fitzgerald dipole can be calculated as","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmE_textFitzgerald(bmr)\n=-I_mathrmm\nleft(-mathrmjk-dfrac1bmr-bmrright) bme_r times bmell","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"and","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmH_textFitzgerald(bmr)\n=\n-mathrmj dfrack_0Z_mathrmF I_mathrmm\nleft\nleft(\ndfrac3k^2bmr-bmr^2\n+\ndfrac3mathrmjkbmr-bmr \n-1   \nright)\ng_0(bmrbmr)\n\nbme_r left(bme_r cdot bmellright)\n-\nleft(\ndfracmathrmjkbmr-bmr\n+dfrac1k^2bmr-bmr^2\n-1\nright)\ng_0(bmrbmr)\n\nbmell\nright ","category":"page"},{"location":"dipoles/dipole_theory/#Radiated-Far-Fields-of-Elementary-Dipoles","page":"Dipoles","title":"Radiated Far Fields of Elementary Dipoles","text":"","category":"section"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"Often, we are interested in the radiated electric field of an elementary dipole or a collection of elementary dipoles at observation locations bmr which are far away from the coordinate origin compared to the location bmr of the dipoles, i.e., r=bmrgg bmr=r. In these cases, the term R=bmr-bmr can be approximated by","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"lim limits_rrightarrow infty bmr-bmr = r -bme_r cdot bmr  ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"where bme_r=bmrr denotes the unit vector into the direction of the far-field observation location bmr. The dyadic Green's functions for the electric field take the form  ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"lim limits_rrightarrow infty\nbmmathcalG_JE(bmrbmr)\n=\n-mathrmj k_0 Z_mathrmF  dfracmathrme^-mathrmjk_0 r4pi r \nleft(\n    mathbfI -bme_rbme_r\nright)\nmathrme^mathrmjk_0 bme_rcdot bmr","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"lim limits_rrightarrow infty\nbmmathcalG_ME(bmrbmr)\n=\nmathrmj k_0  dfracmathrme^-mathrmjk_0 r4pi r \nleft(\n    bme_r times mathbfI\nright)\nmathrme^mathrmjk_0 bme_rcdot bmr","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"The radiated fields asymptotically far away from the sources have no components on radial direction and depend on the radial variable r only by the term dfracmathrme^-mathrmjk_0 rr. We have","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"lim limits_rrightarrow infty \nbmE(rvartheta varphi)\n=\nbmF(varthetavarphi)\ndfracmathrme^-mathrmjk_0 rr","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"where bmF(varthetavarphi) denotes the electric far-field pattern (unit: V). ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"Obviously, the far-field pattern of a Hertzian dipole can be calculated by","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmF_textHertz(varthetavarphi)\n=\nI dfrac-mathrmj k_0 Z_mathrmF4pi\nmathrme^mathrmjk_0 bme_r(varthetavarphi)cdot bmr \nleft(\n    mathbfI -bme_r(varthetavarphi)bme_r(varthetavarphi)\nright)cdot ell\n ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"where I is the excitation of the dipole, bmell is the oriented dipole length and bmr is the dipole location. The dyadic operator left(     mathbfI -bme_r(varthetavarphi)bme_r(varthetavarphi) right)cdot removes the field component in radial direction.","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"The far-field pattern of a Fitzgerald dipole can be calculated by","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"bmF_textFitzgerald(varthetavarphi)\n=\nI_mathrmm dfracmathrmj k_04pi\nmathrme^mathrmjk_0 bme_r(varthetavarphi)cdot bmr \nbme_r(varthetavarphi)times  ell\n ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"where I_mathrmm is the excitation of the dipole, bmell is the oriented dipole length and bmr is the dipole location. Due to the cross product with the radial unit vector, the far field has a zero component in radial direction.","category":"page"},{"location":"dipoles/dipole_theory/#receivedsignaldipoles","page":"Dipoles","title":"Received Signal","text":"","category":"section"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"Let hatbmJ(bmr) and hatbmM(bmr) be the normalized equivalent electric and magnetic volume currents for the fields radiated by an antenna such that bmJ(bmr) = ahatbmJ(bmr) and bmM(bmr) = ahatbmJ(bmr) are the actual equivalent volume current densities when the antenna's transmit port is excited by a signal with wave amplitude a in mathbbC  sqrtmathrmW. It can be shown that an antenna of which the radiated fields can be expressed via the (normalized) equivalent electric and magnetic current distributions hatbmJ(bmr) and hatbmM(bmr) will receive the signal ","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"b=\ndfrac12\niiint limits_V_textsrc\nleft\nbmE(bmr) cdot hatbmJ(bmr)\n-bmH(bmr) cdot hatbmM(bmr)\nright\n mathrmdv","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"when it is illuminated with an external electromagntic field bmE(bmr), bmH(bmr).","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"Consequently, a Hertzian dipole which has a (normalized) electric equivalent current distribution of hatbmJ_textHertz(bmr) = Ibmell delta(bmr-bmr) receives the signal b_textHertz=05I bmell cdot bmE(bmr) which is proportional to the parallel component of the incident electric field at the discrete location bmr.","category":"page"},{"location":"dipoles/dipole_theory/","page":"Dipoles","title":"Dipoles","text":"A Fitzgerald which has a (normalized) magnetic equivalent current distribution of hatbmM_textFitzgerald(bmr) = I_mathrmmbmell delta(bmr-bmr) receives the signal b_textFitzgerald=-05I_mathrmm bmell cdot bmH(bmr) which is proportional to the parallel component of the incident negative magnetic field at the discrete location bmr.","category":"page"},{"location":"spherical/spherical_examples/","page":"-","title":"-","text":"TODO: generate contentS","category":"page"},{"location":"operations/operationmaps/#Operation-Maps-for-Operations-on-Antenna-Field-Representations","page":"OperationMaps","title":"Operation Maps for Operations on Antenna Field Representations","text":"","category":"section"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"In AntennaFieldRepresentations.jl, an operation map is a function-like object which corresponds to a certain method. All operation maps  in AntennaFieldRepresentations.jl subtype the abstract type OperationMap{C, A}.  The idea behind these OperationMaps is to reuse allocated memory and save redundant operations for repeated method calls. The workflow involving OperationMaps starts with initializeing an instance of the OperationMap.  The generated object then can be used like a function, where all overhead for the function call is moved to the initialization of the object. ","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"todo: Todo\nExample coming soon ...","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"For many methods in AntennaFieldRepresentations.jl, a correspoding operation map is defined.  A comprehensive list of all operation maps provided by AntennaFieldRepresentations.jl and their corresponding methods is given in the table below.","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"Operation Map Corresponding method Short Description\nTransmitMap transmit Transmission operator between an AntennaFieldRepresentation and a Fieldsampling\nRotateMap rotate Rotation operator for a certain AntennaFieldRepresentation around fixed Euler angles vartheta, varphi,  and chi\nSpatialShiftMap spatialshift Translation operator for a certain AntennaFieldRepresentation into a translated coordinate system\nChangeRepresentationMap changerepresentation Conversion operator from one type of AntennaFieldrepresentation into another\nInterpolateMap interpolate Interpolation operator of a PlaneWaveExpansion into a PlaneWaveExpansion with a different SphereSamplingStrategy","category":"page"},{"location":"operations/operationmaps/#operationmaps_linmap","page":"OperationMaps","title":"Operation Maps as Linear Operators","text":"","category":"section"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"The abstract type OperationMap{C, A} <: LinearMaps.LinearMap{C} is a subtype of LinearMaps.LinearMap which means that the operations represented by an OperationMap{C, A} are strictly linear operations. The usual way to evaluate an OperationMap is to use it as a function on an AntennaFieldRepresentation. ","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"note: Note\nAn instance of an OperationMap{C, A} only accepts AntennaFieldRepresentation of the exact same type A <: AntennaFieldRepresentation as used for their creation as input arguments.  Calling an OperationMap with a different type of AntennaFieldRepresentation could lead to unexpected behavior or errors. To avoid any unintended function calls with AntennaFieldRepresentations of a different type, the input type for the OperationMap{C, A} is stored in the type parameter A.","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"todo: Todo\nExample coming soon ...","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"However, since an OperationMap{C, A} implements the interface of LinearMaps.jl, the following methods are inherently supported with any operation map M[1]","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"Method Optional Short Description\nBase.size(M) No Dimensions of the operator\nM*x Yes Out of place multiplication\nmul!(y, M, x) Yes in-place multiplication with vectors\nmul!(y, M, x, α, β) Yes in-place multiply-and-add with vectors\nmul!(Y, M, X, α, β) Yes in-place multiplication and multiply-and-add with matrices\nMatrix(M) Yes Conversion to a matrix\nM[:, i] Yes Complete slicing of columns (and rows if the adjoint action is defined)","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"Remember that any AntennaFieldRepresentation is interpreted as an AbstractVector with additional context in AntennaFieldRepresentations.jl. Thus, by using the interface of LinearMaps.jl, the user inherently implies that the vectors x which were used in the above matrix vector products corresponds to the coefficient vector belonging to the AntennaFieldRepresentation used for the definition of the OperationMap{C, A}.","category":"page"},{"location":"operations/operationmaps/#Adjoint,-Transposed,-and-Inverse-Operation-Maps","page":"OperationMaps","title":"Adjoint, Transposed, and Inverse Operation Maps","text":"","category":"section"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"In AntennaFieldRepresentations.jl, it is easy to define the adjoint, transposed, or the inverse of any operation map. Generically, taking the transpose of an operation map wraps the operation map by a TransposeMap, taking the adjoint wraps it by an AdjointMap, and taking the inverse wraps it by an InverseMap (or an IterativeInverseMap). ","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"In particular the inverse operations can be expensive to compute directly. For many operation maps, the function call inverse(M) will result in an IterativeInverseMap, where the matrix vector product with the inverse operator is approximated with the help of IterativeSolvers.jl.","category":"page"},{"location":"operations/operationmaps/","page":"OperationMaps","title":"OperationMaps","text":"[1]: Note for developers: If you want to implement your own operation map M, it is sufficient to implement the methods  Base.size(M) and LinearMaps._unsafe_mul!(y, A::MyFillMap, x::AbstractVector) for supporting the basic features.","category":"page"},{"location":"planewaves/planewave_theory/#planewavetheory","page":"Plane Wave Expansion","title":"Plane-Wave Representations of Electromagnetic Fields","text":"","category":"section"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"This chapter describes how the electromagnetic fields of an antenna can be represented by collections of plane-wave components.","category":"page"},{"location":"planewaves/planewave_theory/#planewave_incident","page":"Plane Wave Expansion","title":"Plane-Wave Spectrum Representation of Incident Fields","text":"","category":"section"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"In a source-free region of space around the origin incident electormagnetic fields can be represented by an integral of the so-called plane-wave spectrum bmP(vartheta varphi) over all propagation directions as","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"bmE(bmr)\n=\nint limits_0^2pi\nint limits_0^pi\nbmP(vartheta varphi)\nmathrme^-mathrmj bmk(vartheta varphi) cdot bmr\n sin vartheta\nmathrmdvartheta mathrmdvarphi","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"and","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"bmH(bmr)\n=\nint limits_0^2pi\nint limits_0^pi\ndfracbmk(vartheta varphi)Z_mathrmF lVertbmk(vartheta varphi)rVert times\nbmP(vartheta varphi)\nmathrme^-mathrmj bmk(vartheta varphi) cdot bmr\n sin vartheta\nmathrmdvartheta mathrmdvarphi ","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"respectively, where the so-called plane-wave propagation vector direction denotes the direction of propagation","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"bmk(vartheta varphi)\n=\nk_0left(\nsin vartheta cos varphi bme_x \n+ \nsin vartheta sin varphi bme_y\n+\ncos vartheta bme_z \nright)","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"simultaneously encodes the direction of propagation (i.e., the direction of bmk) and the wavelength lambda (from its magnitude lVert bmk rVert =k_0 via lambda= 2pi  k_0) of any plane-wave component. The plane-wave spectrum bmP(vartheta varphi) is always perpendicular to the propagation direction bmk(vartheta varphi).","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"note: Note\nThe above representation of the electric and magnetic field is purely solenoidal, i.e., divergence-free. As such, the representation is only good for representing source-free field solutions of Maxwell's equations. There exists a close relationship between the spherical vector-wave expansion of incident fields which uses only spherical vector-wave modes bmF_s ell m^(1)(r vartheta varphi) of incident type and the above representation of the fields as an integral over propagating plane waves.","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"note: Note\nSince the propagation vector bmk and the corresponding unit vector into the same direction hatbmk encode the propagation direction of the plane wave, we may use the shorthand notation bmP(hatbmk) to represent the slightly longer expression bmP(vartheta varphi) whenever convenient (sometimes we may even mix vartheta varphi with hatbmk in the same expression).  This should not lead to any ambiguities because the relation between hatbmk and the tuple vartheta varphi is one-to one, as each encodings uniquely define the same point on the unit sphere.","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"","category":"page"},{"location":"planewaves/planewave_theory/#planewave_radiated","page":"Plane Wave Expansion","title":"Far-Field Pattern Representation of Radiated Fields","text":"","category":"section"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"The radiated field of any current distribution is completely characterized by the radiated far-field pattern ","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"bmF(vartheta varphi) = lim limits_rrightarrow infty dfracrmathrme^-mathrmjk_0 r bmE(r vartheta varphi)","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"because it is, in prinicple, possible to reconstruct all radiated spherical vector-wave modes from a spherical expansion of the far fields. Thus, we may represent any radiated field by its far-field pattern.","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"warning: Warning\nDo not confuse the spherical vector-wave modes bmF_s ell m^(1)(r vartheta varphi) with the far-field pattern bmF(vartheta varphi)!","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"Note, that evaluating the near-fields of a radiated field given in terms of its far-field pattern bmF(vartheta varphi) is not straightforward. Strictly speaking, it is necessary to reconstruct the spherical vector-wave expansion of the radiated field from its far-field pattern before one can evaluate the spherical expansion at the desired location bmr.","category":"page"},{"location":"planewaves/planewave_theory/#planewave_translation","page":"Plane Wave Expansion","title":"Translation of a Far-Field Pattern into a Plane Wave Spectrum in Different Coordinate System","text":"","category":"section"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"Fortunately, there is a convenient way to convert the far-field pattern bmF(vartheta varphi) of a radiated field into an incident plane-wave spectrum bmP(vartheta varphi) in an observation volume around a new coordinate origin which is translated by the vector bmR against the original coordinate system.  We use primed coordinates r vartheta varphi and primed vectors bmk to distinguish the translated coordinate system from the original coordinate system. The geometrical situation is depicted in the figure below.","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/SphericalTranslation_dark.svg\" width=\"500\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/SphericalTranslation.svg\" width=\"500\" >\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Schematic of the geometry for the translation of a far-field representation of radiated fields into a plane-wave spectrum representation of incident fields in a new coordinate system.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"We have","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"bmP(vartheta varphi) = T_L(k_0 lvert bmR rvert hatbmk cdot hatbmR) bmF(vartheta varphi)biggrvert_vartheta = vartheta varphi = varphi ","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"where ","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"T_L(k_0 lvert bmR rvert hatbmk cdot hatbmR)\n=\n-sum limits_ell =0^Lleft(-mathrmjright)^ell \nleft(2ell+1right)  \nmathrmh_ell^(2)(k_0 lvert bmR rvert)\nmathrmP_ell(hatbmk cdot hatbmR)","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"with hatbmR the unit vector in the direction of the vector from the original coordinate origin to the new coordinate origin. Ideally, the number of sumation terms L should go to infty, but in practice, we can truncate the summation at a carefully chosen finite L.","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"The calculated plane-wave spectrum bmP(vartheta varphi) can be used in the integral expressions above to find the electric and magnetic fields in the observation region.","category":"page"},{"location":"planewaves/planewave_theory/#planewave_received","page":"Plane Wave Expansion","title":"Plane-Wave Representation of the Received Signal of an Antenna","text":"","category":"section"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"Let hatbmF(vartheta varphi) be the normalized far field radiated by an antenna such that bmF(vartheta varphi)=  ahatbmF(vartheta varphi) is the actual radiated far-field when its transmit port is excited by a signal with wave amplitude a in mathbbC  sqrtmathrmW. To determine the received signal b in mathbbC  sqrtmathrmW of this antenna in receive mode under a certain illumination of an incident field, it is convenient to represent the incident field via its plane-wave spectrum bmP(vartheta varphi). In this case, the received signal is given by (remember that hatbmk depends on vartheta varphi)","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"b=\nint limits_0^2pi\nint limits_0^pi\nbmP(hatbmk)cdot\nhatbmFleft(- hatbmk right)\n sin vartheta\nmathrmdvartheta mathrmdvarphi ","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"Combining this result with the findings from the section above, we can express the S_21 parameter measured for the transmission between two antennas as","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"S_21=\nint limits_0^2pi\nint limits_0^pi\nhatbmF_1left(hatbmk right)cdot\nT_L(k_0 lvert bmR rvert hatbmk cdot hatbmR)\nhatbmF_2left(- hatbmk right)\n sin vartheta\nmathrmdvartheta mathrmdvarphi ","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"where hatbmF_1left(hatbmk right) is the normalized far-field pattern of antenna 1 (the transmit antenna), hatbmF_2left( - hatbmk right) is the inverted far-field pattern of antenna 2 (the receive antenna) and T_L(k_0 lvert bmR rvert hatbmk cdot hatbmR) is the translation operator known from previous sections with bmR denoting the vector separating the centers of the two antennas. The geometric situation for the calculation of the S_21-parameter is depicted below. ","category":"page"},{"location":"planewaves/planewave_theory/","page":"Plane Wave Expansion","title":"Plane Wave Expansion","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/S21Translation_dark.svg\" width=\"500\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/S21Translation.svg\" width=\"500\" >\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    The geometric situation for the calculation of the transmission between two antennas.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"spherical/spherical_fast/#Fast-Algorithms-in-Spherical-Measurement-Setups","page":"Spherical Wacker Algorithm","title":"Fast Algorithms in Spherical Measurement Setups","text":"","category":"section"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"Very efficient post-processing algorithms exist for measurements of the S_12-parameter between a radiating probe antenna and a rotating receiving antenna under test (AUT). The AUT is rotated around the coordinate origin by the angles vartheta and varphi. The probe antenna remains at a fixed position in the positive z-diretion but may be rotated around the z-axis by the angle chi to  realize different polarizations of the incident field at the AUT. The measurement setup is depicted in the figure below.","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/geom_measure_dark.svg\" width=\"200\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/geom_measure.svg\" width=\"200\" >\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Setup for the antenna field measurement.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"spherical/spherical_fast/#fastsphericalS12","page":"Spherical Wacker Algorithm","title":"Fast Evaluation of S_12-Parameters in Spherical Measurement Setups","text":"","category":"section"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"The  S_12-parameter can be calculated by (cf. [1, eq. (4.40)])","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"S_12(vartheta varphi chi)=sum limits_s=1^2 sum limits_ell=1^L sum limits_m=-ell^ell sum limits_mu=-ell^ell beta_sell m^mathrmautmathrme^-mathrmj m varphi mathrmd_mmu^ell(vartheta) mathrme^-mathrmj mu chialpha_sell mu^(1)mathrmpro","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"Here. alpha_sell mu^(1)mathrmpro are the spherical mode coefficients of the incident probe antenna field (normalized to a unit excitation of the probe), beta_sell m^mathrmaut are the spherical receive coefficients of the AUT and mathrmd_mmu^ell(vartheta) is the so-called Wigner-d-matrix which has a finite Fourier-series expansion","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"mathrmd_mmu^ell(vartheta)= mathrmj^m-mu sum limits_m_vartheta=-ell^ell  Delta_m_varthetamu^ell Delta_m_varthetam^ell mathrme^-mathrmj m_vartheta  vartheta ","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"where the deltas","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"Delta_m_varthetam^ell= mathrmd_mmu^ell(mathrmpi2)","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"correspond to the calue of the Wigner-d-matrix at vartheta=mathrmpi2.","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"Substituting the series expansion into the original equation, one obtains","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"S_12(vartheta varphi chi)=\nsum limits_mu=-L^L \nmathrme^-mathrmj mu chi\nunderbrace\nsum limits_m=-L^L\nmathrme^-mathrmj m varphi\nunderbrace\nsum limits_m_vartheta=-L^L\nmathrme^-mathrmj m_vartheta  vartheta \nunderbrace\nmathrmj^m-mu\nsum limits_ell=max(mm_vartheta1)^L\nDelta_m_varthetamu^ell Delta_m_varthetam^ell\n underbrace\n sum limits_s=1^2 \n alpha_sell mu^(1)mathrmpro\nbeta_sell m^mathrmaut\n_u_mumell\n_tildev_mumm_vartheta\n_v_mum(vartheta)\n_w_mu(varthetavarphi)","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"The form of the above equation gives rise to an efficient algorithm to evaluate the S_12-parameter on a spherical measurement surface by successively calculating  alpha_sell mu^(1)mathrmpro beta_sell m^mathrmaut rightarrow u_mumell rightarrow tildev_mumm_vartheta rightarrow v_mum(vartheta) rightarrow w_mu(varthetavarphi). The occurring Fourier series are evaluated using a fast Fourier transform giving rise to the resulting data available at a regular spherical sampling grid.","category":"page"},{"location":"spherical/spherical_fast/#Radiating-Hertzian-Dipole-Probe-and-Receiving-AUT","page":"Spherical Wacker Algorithm","title":"Radiating Hertzian Dipole Probe and Receiving AUT","text":"","category":"section"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"If we want to calculate the transmission between a dipole probe and the AUT, we need to know the spherical wave expansion of the probe field at the AUT location.  The incident field at the coordinate origin of a Hertzian dipole, oriented in x- direction with a given dipole moment Iell at a given location bmr= r bme_z on the z-axis, is characterized by the spherical wave coefficients ","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"alpha_1ell1^(1)=dfrac-mathrmj4 k sqrtZ_mathrmF Iell\n sqrtdfrac2ell+1pi h_ell^(2)(kr)","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"alpha_1ell-1^(1)=dfrac-mathrmj4 k sqrtZ_mathrmF Iell\n sqrtdfrac2ell+1pi h_ell^(2)(kr)","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"alpha_2ell1^(1)=dfrac14 k sqrtZ_mathrmF Iell\n sqrtdfrac2ell+1pi dfrac1kr  dfracmathrmdmathrmd kr leftkrh_ell^(2)(kr)right","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"alpha_2ell-1^(1)=dfrac-14 k sqrtZ_mathrmF Iell\n sqrtdfrac2ell+1pi dfrac1kr  dfracmathrmdmathrmd kr leftkrh_ell^(2)(kr)right","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"where h_ell^(2)(kr) are the spherical Hankel functions of second kind. All incident field coefficients with mneq 1 are equal to zero. ","category":"page"},{"location":"spherical/spherical_fast/#farfieldcoefficients","page":"Spherical Wacker Algorithm","title":"Regularly Sampled Far Field of AUT","text":"","category":"section"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"The far field pattern of the AUT can be calculated by determining the received signal of a plane wave illumination traveling into the desired propagation directions. To determine the correctly normalized far-field pattern (with unit V), we utilize the spherical expansion of a x-polarized plane wave traveling into negativ z-direction with the coefficients","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"alpha_1ell1^(1)=- mathrmj^ell sqrtdfrac2ell+1pi dfracsqrtZ_mathrmF2","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"alpha_2ell1^(1)=- mathrmj^ell sqrtdfrac2ell+1pi dfracsqrtZ_mathrmF2","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"alpha_1ell-1^(1)=- mathrmj^ell sqrtdfrac2ell+1pi dfracsqrtZ_mathrmF2","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"alpha_2ell-1^(1)= mathrmj^ell sqrtdfrac2ell+1pi dfracsqrtZ_mathrmF2 ","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"All incident field coefficients with mneq 1 are equal to zero.  Using the reciprocity relation beta_sell m^mathrmaut=(-1)^m alpha_sell- m^(4)mathrmaut, we can efficiently calculate the desired far fields for regularly sampled vartheta and varphi.","category":"page"},{"location":"spherical/spherical_fast/#Fast-Reconstruction-of-Expansion-Coefficients-from-S_{12}-Parameters-in-Spherical-Measurement-Setups","page":"Spherical Wacker Algorithm","title":"Fast Reconstruction of Expansion Coefficients from S_12-Parameters in Spherical Measurement Setups","text":"","category":"section"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"The  S_12-parameter can be calculated by (cf. [1, eq. (4.40)])","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"S_12(vartheta varphi chi)=\nsum limits_mu=pm 1 \nmathrme^-mathrmj mu chi\nunderbrace\nsum limits_m=-L^L\nmathrme^-mathrmj m varphi\nunderbrace \nsum limits_ell=max(mm_vartheta1)^L\nmathrmd_mum^ell(vartheta)\n underbrace\n sum limits_s=1^2 \n alpha_sell mu^(1)mathrmpro\nbeta_sell m^mathrmaut\n_u_mumell\n_v_mum(vartheta)\n_w_mu(varthetavarphi)","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"Here, mathrmd_mmu^ell(vartheta) is the so-called Wigner-d-matrix, alpha_sell mu^(1)mathrmpro are the spherical mode coefficients of the incident probe antenna field (normalized to a unit excitation of the probe), and beta_sell m^mathrmaut are the spherical receive coefficients of the AUT which we aim to reconstruct from the measured data. Note, that a first-order probe is assumed here (i.e., all incident modes with muneq pm 1 are zero), reducing the number of summation terms in the mu-summation to two.  ","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"Starting at S_12 (vartheta varphi chi), we can successively calculate S_12(vartheta varphi chi) rightarrow w_mu(varthetavarphi) rightarrow v_mum(vartheta) rightarrow u_mumell using the orthogonality relations","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"int limits_0^2pi\nmathrme^ mathrmj (m-m) varphi  mathrmd varphi = 2pi  delta_mm","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"and","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"int limits_0^pi\nmathrmd_mm^ell(vartheta)\n\nmathrmd_mm^ell(vartheta)\n\nsin(vartheta) \n mathrmd vartheta = dfrac22ell+1  delta_ellell","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"from where the beta_sell m^mathrmaut can be found by solving a 2times 2 system of linear equations","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"\tbeginbmatrix\n\t\tu_+1mell05em\n\t\tu_-1mell\n\tendbmatrix\n=\nbeginbmatrix\nalpha_1ell +1^(1)mathrmpro \n\nalpha_2ell +1^(1)mathrmpro \n05em\nalpha_1ell -1^(1)mathrmpro \n\nalpha_2ell -1^(1)mathrmpro\t\nendbmatrix\n\n\tbeginbmatrix\n\tbeta_1 ell m ^mathrmaut05em\n\tbeta_2 ell m ^mathrmaut\nendbmatrix ","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"The individual transformation steps are as follows. Since we only have to consider mu-values for mu = pm 1, we can calculate the rightarrow w_mu(varthetavarphi) from the S_12 (vartheta varphi chi)-values measured at chi in 0 pi2 by","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"w_+1(varthetavarphi)= \ndfrac12\nleft\nS_12 (vartheta varphi chi=0) + mathrmj S_12 (vartheta varphi chi=pi2)\nright","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"and","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"w_-1(varthetavarphi)= \ndfrac12\nleft\nS_12 (vartheta varphi chi=0) - mathrmj S_12 (vartheta varphi chi=pi2)\nright","category":"page"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"","category":"page"},{"location":"spherical/spherical_fast/#refs","page":"Spherical Wacker Algorithm","title":"References","text":"","category":"section"},{"location":"spherical/spherical_fast/","page":"Spherical Wacker Algorithm","title":"Spherical Wacker Algorithm","text":"[1] J. E. Hansen, ed., Spherical Near-Field Antenna Measurements, The Institution of Engineering and Technology, Michael Faraday House, Six Hills Way, Stevenage SG1 2AY, UK: IET, 1988.","category":"page"},{"location":"planewaves/planewave_representations/#Representing-Antenna-Fields-with-Plane-Wave-Expansions","page":"Plane Wave Representations","title":"Representing Antenna Fields with Plane-Wave Expansions","text":"","category":"section"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"A common representation of antenna fields is in terms of plane wave expansions. In AntennaFieldRepresentations.jl, plane-wave expansions are represented by a struct PlaneWaveExpansion{P, S, C} which is a subtype of AntennaFieldRepresentation{P, C}. The type parameters have the following meaning","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"Parameter Short Description\nP <: PropagationType Can be Radiated, Absorbed, or Incident\nC <: Complex Element type of the coefficient vector\nS <: SphereSamplingStrategy, C} Struct defining the sampling of the k-space unit sphere. Can be RegularθRegularϕSampling or GaussLegendreθRegularϕSampling.","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"A PlaneWaveExpansion of Radiated type corresponds to a far field pattern bmF(vartheta varphi) and a PlaneWaveExpansion of Incident type corresponds to a plane wave spectrum bmP(vartheta varphi) as described in more detail in the theory section.","category":"page"},{"location":"planewaves/planewave_representations/#Constructors-for-a-PlaneWaveExpansion","page":"Plane Wave Representations","title":"Constructors for a PlaneWaveExpansion","text":"","category":"section"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"To generate a PlaneWaveExpansion, use the following constructor:","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"PlaneWaveExpansion(P::PropagationType, samplingstrategy::S, Eθ::Matrix{C}, Eϕ::Matrix{C}, wavenumber::Number) where{S <: SphereSamplingStrategy, C}","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"The input arguments for the constructor are","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"P <: PropagationType : Can be Radiated, Absorbed, or Incident\nsamplingstrategy::SphereSamplingStrategy: Struct defining the sampling of the k-space unit sphere. Can be RegularθRegularϕSampling or GaussLegendreθRegularϕSampling.\nEθ::Matrix{C}: θ-component amplitudes of the plane waves. Dimensions must match the samplingstrategy.\nEϕ::Matrix{C}: ϕ-component amplitudes of the plane waves. Dimensions must match the samplingstrategy.\nwavenumber : Wavenumber omega = 2pi  f","category":"page"},{"location":"planewaves/planewave_representations/#planewave_sampling","page":"Plane Wave Representations","title":"Stored Samples of a PlaneWaveRepresentation","text":"","category":"section"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"In a PlaneWaveExpansion, an antenna far field pattern bmF(vartheta varphi) or a plane wave spectrum bmP(vartheta varphi) is representated by a discrete set of samples in the vartheta varphi-domain [1] . ","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"The samples should be chosen such that","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"integration over the sphere is fast and accurate\nlocal interpolation is sufficently accurate\nthe conversion  bmF(hatbmk) rightarrow bmF(-hatbmk) has small computational cost (ideally should not rely on interpolation)\nredundancy in the representation is kept minimal","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"By default, any far-field pattern or plane-wave spectrum with a corresponding spherical mode order of L is sampled according to a GaussLegendreθRegularϕSampling with","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"N_vartheta=L+1","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"and","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"N_varphi=2L+2 ","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"Although the varphi-sampling is slightly redundant (2L+1 samples would suffice) the even number of  varphi-samples ensures that for every sampling point there is another sampling point exactly in the oppsoite direction. This has obvious benefits for the conversion  bmF(hatbmk) rightarrow bmF(-hatbmk) as well as for pattern interpolation, when the interpolation scheme requires samples at either side of the coordinate poles at varthetain 0pi.","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"tip: Tip\nPlaneWaveExpansions can be sampled according to any arbitrary SphereSamplingStrategy.","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"","category":"page"},{"location":"planewaves/planewave_representations/#Methods-Special-to-PlaneWaveExpansions","page":"Plane Wave Representations","title":"Methods Special to PlaneWaveExpansions","text":"","category":"section"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"In addition to the methods defined in the interface of AntennaFieldRepresentation, a PlaneWaveExpansion supports the following methods:","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"todo: Todo\nAdd a comprehensive list of PlaneWaveExpansion methods","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"","category":"page"},{"location":"planewaves/planewave_representations/#planewave_refs","page":"Plane Wave Representations","title":"References","text":"","category":"section"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"[1]: Since the propagation vector bmk and the corresponding unit vector into the same direction hatbmk encode the propagation direction of the plane wave, we may use the shorthand notation bmP(hatbmk) to represent the slightly longer expression bmP(vartheta varphi) whenever convenient (sometimes we may even mix vartheta varphi with hatbmk in the same expression). ","category":"page"},{"location":"planewaves/planewave_representations/","page":"Plane Wave Representations","title":"Plane Wave Representations","text":"This should not lead to any ambiguities because the relation between hatbmk and the tuple vartheta varphi is one-to one, as each encodings uniquely define the same point on the unit sphere.","category":"page"},{"location":"dipoles/dipole_representations/#Representing-Antenna-Fields-with-Equivalent-Dipole-Distributions","page":"Dipole Representations","title":"Representing Antenna Fields with Equivalent Dipole Distributions","text":"","category":"section"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"One of the simplest ways to represent an antenna field is by a collection of electrically short (i.e., ell ll lambda) dipole antennas.  Since the radiated fields of short dipole antennas are known analytically, one can simply superimpose the effects of several spatially distributed dipole antennas to approximate the radiated fields of an antenna.","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"In AntennaFieldRepresentations.jl, collections (or arrays) of electrically short dipole arrays are stored in a struct DipoleArray{P,E,T,C} which is a subtype of AntennaFieldRepresentation{P, C}. The type parameters have the following meaning","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"Parameter Short Description\nP <: PropagationType Can be Radiated, Absorbed, or Incident\nE <: ElmagType Can be Electric or Magnetic\nT <: Real Number type used in the vector defining the positions of dipoles\nC <: Complex Element type of the coefficient vector","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"For extra convenience, the type aliases HertzArray{T,C} = DipoleArray{Radiated, Electric, T, C} and FitzgeraldArray{T, C} = DipoleArray{Radiated, Magnetic, T, C} are introduced. Therefore, the user will mostly interact with HertzArrays and FitzgeraldArrays while the DipoleArray type is hidden under the hood.","category":"page"},{"location":"dipoles/dipole_representations/#Constructors-for-a-DipoleArray","page":"Dipole Representations","title":"Constructors for a DipoleArray","text":"","category":"section"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"To generate a DipoleArray, use one of the following constructors:","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"DipoleArray{P, E}(positions::Vector{V1}, orientations::Vector{V2}, dipolemoments::Vector{C}, wavenumber) where{P <: PropagationType, E <: ElmagType, C <: Complex>, V1<: AbstractVector, V2<: AbstractVector{C}}","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"DipoleArray{P, E, T, C}(positions::Vector{V1}, orientations::Vector{V2}, dipolemoments::Vector{C}, wavenumber) where{P <: PropagationType, E <: ElmagType, C <: Complex>, V1<: AbstractVector, V2<: AbstractVector{C}}","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"HertzArray{T, C}(positions::Vector{V1}, orientations::Vector{V2}, dipolemoments::Vector{C}, wavenumber) where{C <: Complex>, V1<: AbstractVector, V2<: AbstractVector{C}}","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"FitzgeraldArray{T, C}(positions::Vector{V1}, orientations::Vector{V2}, dipolemoments::Vector{C}, wavenumber) where{C <: Complex>, V1<: AbstractVector, V2<: AbstractVector{C}}","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"HertzArray(positions::Vector{V1}, orientations::Vector{V2}, dipolemoments::Vector{C}, wavenumber) where{C <: Complex>, V1<: AbstractVector, V2<: AbstractVector{C}}","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"FitzgeraldArray(positions::Vector{V1}, orientations::Vector{V2}, dipolemoments::Vector{C}, wavenumber) where{C <: Complex>, V1<: AbstractVector, V2<: AbstractVector{C}}","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"The input arguments for the costructors are","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"positions::Vector{V1} : A vector of 3D-position vectors. Julia must be able to convert the type V1 into an SVector{3}. Must have the same length as orientations and dipolemoments.\norientations::Vector{V2}: A complex valued vector of 3D-orientations. Complex values account for elliptical polarizations in general. Julia must be able to convert the type V2 into an SVector{3}. Must have the same length as positions and dipolemoments.\ndipolemoments::Vector{C}: A vector of complex values to denote the excitation of each individual dipole. Must have the same length as positions and orientations.\nwavenumber : Wavenumber omega = 2pi  f","category":"page"},{"location":"dipoles/dipole_representations/#Dipoles-with-Alternative-Propagation-Types","page":"Dipole Representations","title":"Dipoles with Alternative Propagation Types","text":"","category":"section"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"Most users will probably be familiar with radiating dipoles. They correspond to the Radiated propagation type.  The Absorbed propagation type in some sense reverses the arrow of time[1]. Instead of radiating power away from the dipoles towards infinity, the electromagnetic fields of an Absorbed propagation type bring energy from infinty towards the dipole locations. ","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"warning: Warning\nA DipoleArray of Absorbed type must not be confused with a receiving antenna!The DipoleArray is an equivalent representation of the electromagnetic fields. Use the ProbeAntenna type to indicate a receiving antenna.","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"One of the main use cases of AntennaFieldRepresentations of Absorbed type is to represent scattered fields as a superposition of Absorbed and Radiated types. The fields of DipoleArrays of Absorbed and Radiated type become singular at the spots where the individual dipoles are located. ","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"The third type of AntennaFieldRepresentation, i.e., the Incident type[2], does not have any singularities anywhere. It can be used to represent source-free solutions of Maxwell's equations and is well suited to represent incident fields. Thus, if field representations of Absorbed type are not your cup of tea, you can represent any scattered field as a superposition of Incident and Radiated types.","category":"page"},{"location":"dipoles/dipole_representations/#Dipole-Examples","page":"Dipole Representations","title":"Dipole Examples","text":"","category":"section"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"Let us first create an Array of Hertzian dipoles. ","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"using AntennaFieldRepresentations\n\nf = 1.5e9;  # Set frequency to 1.5 GHz\nλ = AntennaFieldRepresentations.c₀ / f;  # wavelength\nk0 = 2 * pi / λ;  # wavenumber\n\npositions= [[-λ, 0, 0], [0, λ/2, λ/2], [0, -λ,0]];\norientations= [complex.([0.0,0.0,1.0]), complex.([0.0,1.0,0.0]), complex.([0.1,0.0,0.0])];\ndipolemoments= [ComplexF64(1.0), ComplexF64(1.0), ComplexF64(1.0)];\n\ndipoles = HertzArray(positions, orientations, dipolemoments, k0);","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"The resulting set of dipoles might be visualized as follows:","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/dipoles_dark.png\" width=\"750\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/dipoles_light.png\" width=\"750\" >\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    The dipoles are visualized as arrows in this example.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"We might be interested in the electromagnetic field - maybe its E_x component - which is radiated by these dipoles, let's say in a plane z=5lambda. Thus, we can define an array of observation points and evaluate the electric field at these observation points as follows (the Ref() command ensures that this input is treated as a constant for Julia's broadcasting operator \".\"):","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"Rs= [[x , y, 5λ] for x in -10λ:λ/4:10λ , y in -10λ:λ/4:10λ] # Define observation points\n\nE = efield.(Ref(dipoles), Rs) # Evaluate E-field at observation points\nEx=[e[1] for e in E] # Extract x-component of E-field","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"The resulting field (stored as an ordinary matrix) can then be visualized, e.g., with Makie.jl or Plots.jl","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/field_dipoles_dark.png\" width=\"750\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/field_dipoles_light.png\" width=\"750\" >\n  <img alt=\"\" src=\"\" width=\"750\">\n</picture>\n\n  <figcaption>\n    Magnitude of the Eₓ-component of the radiated field in a plane at z=5λ.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"Furthermore, we might be interested in the far fields radiated by the dipole collection.  Thus, we define pairs (θ, ϕ) of angles for the directions in which we want to evaluate the far fields and calculate the far field via the farfield command ","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"θs= LinRange(0.0, π, 40)\nϕs= LinRange(0.0, 2π, 80)\n\ndirections= [(θ, ϕ) for θ in θs, ϕ in ϕs]\n\nfarfields= farfield.(Ref(dipoles), directions)","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"The output is a pair (Fθ, Fϕ) for each input in the directions array. We can retrieve the individual components via","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"Fθ= [ff[1] for ff in farfields]\nFϕ= [ff[2] for ff in farfields]","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"The resulting  far field can then be visualized, e.g., with Makie.jl or Plots.jl","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/farfield_dipoles_dark.png\" width=\"750\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/farfield_dipoles_light.png\" width=\"750\" >\n  <img alt=\"\" src=\"\" width=\"750\">\n</picture>\n\n  <figcaption>\n    Magnitude of  of the radiated far field in dB-scale.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"As it turns out, the radiated far-field is rather omni-directional. With deeper thought, this might not be too surprising because each field component is equally well excited by the three dipoles in x-, y-, and z- direction.","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"[1]: Replacing a Radiated type AntennaFieldRepresentation by an Absorbed one, the electromagnetic fields of the two representations are not exactly \"reversed\" in time, as also the sign of the magnetic field changes. To be technically correct, both types of field representations should be considered as separate solutions of Maxwell's equations with different asymptotic boundary conditions at infinity. The fields of DipoleArrays of Absorbed type are derived from the scalar Green's function mathrme^ mathrmj k r  (4 pi r) (as opposed to mathrme^- mathrmj k r  (4 pi r) for Radiated representations).","category":"page"},{"location":"dipoles/dipole_representations/","page":"Dipole Representations","title":"Dipole Representations","text":"[2]: Formally the fields of DipoleArrays of Incident type are derived from the scalar \"Green's function\" (more of a pseudo Green's function) mathrmsin(mathrmj k r)  (4 pi r). You can see that Incident fields are nothing but a superposition of Absorbed and Radiated fields.","category":"page"},{"location":"sampling/sphericalsampling/#sphericalsampling","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"","category":"section"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"If the antenna field is sampled on a (concentric) spherical surface, the situation is best described with a SphericalFieldSampling. It allows to sample the antenna field at relatively regularly distributed sampling points on a spherical surface. The sampling points on the sphere are defined by a SphereSamplingStrategy. For each sampling point, the antenna field is sampled with two polarizations, i.e., the probe antenna samples the field in the chi=0 and the chi=90^ configuration.","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"In general, SphericalFieldSamplings can be used with arbitrary probes but the most efficient algorithms arise from so-called first-order probes.","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"note: Note\nVery efficient algorithms - e.g., for the transmission - arise when a SphericalFieldSampling is paired with a  SphericalWaveExpansion.","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"","category":"page"},{"location":"sampling/sphericalsampling/#Constructors-of-SphericalFieldSampling","page":"Spherical Field Samplings","title":"Constructors of SphericalFieldSampling","text":"","category":"section"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"To construct a SphericalFieldSampling, the user can specify","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"a SphereSamplingStrategy to define the number and location of the sampling points on the sphere\nthe spherical coefficients alpha_sell m^(1) characterizing the field incident on the antenna under test generated by a radiating probe antenna at the measurement starting position vartheta =0 varphi = 0 chi =0.","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"This is accomplished by using the constructor","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"SphericalFieldSampling(\n    samplingstrategy::SphereSamplingStrategy,\n    incidentcoefficients::AbstractSphericalCoefficients,\n) ","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"Alternatively, the user can specify","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"a SphereSamplingStrategy to define the number and location of the sampling points on the sphere\nthe location and orientation of the probe antenna at the measurement starting position vartheta =0 varphi = 0 chi =0\na ProbeAntenna object characerizing the utilized probe antenna\n(a flag to indicate if the probe should be treated as a first-order probe)","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"This is accomplished by using the constructor","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"SphericalFieldSampling(\n    samplingstrategy::SphereSamplingStrategy,\n    initialposition::AbstractVector,\n    eulerangles::Tuple{<:Real, <:Real, <:Real},\n    probe::ProbeAntenna;\n    firstorder::Bool=false\n) ","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"Using the latter constructor, the incident probe field coefficients are calculatated for the probe configuration and fed into the former constructor to generate the SphereSamplingStrategy.","category":"page"},{"location":"sampling/sphericalsampling/#sphericalsamplingstrategy","page":"Spherical Field Samplings","title":"Spherical Sampling Strategies","text":"","category":"section"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"At the moment, AntennaFieldRepresentations.jl supports two different kinds of SpheresamplingStrategys: ","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"RegularθRegularϕSampling\nGaussLegendreθRegularϕSampling","category":"page"},{"location":"sampling/sphericalsampling/#Spherical-Coefficients-of-the-Incident-Probe-Field","page":"Spherical Field Samplings","title":"Spherical Coefficients of the Incident Probe Field","text":"","category":"section"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"The incident probe field coefficients are represented by a vector of AbstractSphericalCoefficients type. The user must identify the spherical coefficients of the incident probe field (relative to an AUT-centered coordinate system) in a pre-processing step.","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"The vector for the incident field coefficients must be of type SphericalCoefficients if it contains non-zero entries for some coefficients with m neq pm 1 or of type FirstOrderSphericalCoefficients if all coefficients with m neq pm 1 can be ignored.","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"To create a vector of type AbstractSphericalCoefficients, use one of the following constructors:","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"SphericalCoefficients(x::AbstractVector)","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"FirstOrderSphericalCoefficients(x::AbstractVector)","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"note: Note\nSince a vector of type SphericalCoefficients is itself a subtype of AbstractVector, we can easily convert a vector of SphericalCoefficients into a vector of first-order spherical coefficients via FirstorderSphericalCoefficients(x::SphericalCoefficients)Converting a an arbitrary AbstractVector into a FirstOrderSphericalCoefficients-vector drops all entries which correspond to non-first-order modes.    ","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"","category":"page"},{"location":"sampling/sphericalsampling/#farfieldsampling","page":"Spherical Field Samplings","title":"Far Field Sampling","text":"","category":"section"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"The far-field of the antenna under test is equivalently calculated as the received signal by the AuT when illuminated by an incident plane wave. The spherical coefficients of an incident plane wave are analytically known. They can be conveniently collected up to mode order L via the method ","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"αinc_planewave(L::Integer)","category":"page"},{"location":"sampling/sphericalsampling/","page":"Spherical Field Samplings","title":"Spherical Field Samplings","text":"returning a vector of type FirstOrderSphericalCoefficients because all coefficients with m neq pm 1 are zero for the incident plane wave.","category":"page"},{"location":"operations/interactions/#Transmission-Between-Field-Representations","page":"Transmission Between Field Representations","title":"Transmission Between Field Representations","text":"","category":"section"},{"location":"operations/interactions/","page":"Transmission Between Field Representations","title":"Transmission Between Field Representations","text":"In this chapter we investigate how we can model the interaction (or transmission) between two field representations.","category":"page"},{"location":"operations/interactions/","page":"Transmission Between Field Representations","title":"Transmission Between Field Representations","text":"To be able to evaluate the interaction, at least one of the field representations must be of a radiating type, such that it can meaningfully represent an antenna in transmit mode. By inferring reciprocity, we can calculate which signal such an antenna would receive when illuminated by a given incident field. ","category":"page"},{"location":"operations/interactions/","page":"Transmission Between Field Representations","title":"Transmission Between Field Representations","text":"The second field representation type must be either representing an incident field or a radiating field (in which case an incident field at the receive antenna location can be calculated from the radiating field type). ","category":"page"},{"location":"operations/interactions/","page":"Transmission Between Field Representations","title":"Transmission Between Field Representations","text":"All possible interactions between field types are listed below.","category":"page"},{"location":"operations/interactions/#Dipole-Dipole","page":"Transmission Between Field Representations","title":"Dipole <-> Dipole","text":"","category":"section"},{"location":"operations/interactions/#Dipole-Arbitrary-Spherical-Expansion","page":"Transmission Between Field Representations","title":"Dipole <-> Arbitrary Spherical Expansion","text":"","category":"section"},{"location":"operations/interactions/#Dipole-Arbitrary-Plane-Wave-Representation","page":"Transmission Between Field Representations","title":"Dipole <-> Arbitrary Plane-Wave Representation","text":"","category":"section"},{"location":"operations/interactions/#Radiating-Spherical-Expansion-Radiating-Spherical-Expansion","page":"Transmission Between Field Representations","title":"Radiating Spherical Expansion <-> Radiating Spherical Expansion","text":"","category":"section"},{"location":"operations/interactions/#Radiating-Spherical-Expansion-Incident-Spherical-Expansion","page":"Transmission Between Field Representations","title":"Radiating Spherical Expansion <-> Incident Spherical Expansion","text":"","category":"section"},{"location":"operations/interactions/#Radiating-Spherical-Expansion-Far-Field-Pattern","page":"Transmission Between Field Representations","title":"Radiating Spherical Expansion <-> Far-Field Pattern","text":"","category":"section"},{"location":"operations/interactions/#Radiating-Spherical-Expansion-Plane-Wave-Spectrum","page":"Transmission Between Field Representations","title":"Radiating Spherical Expansion <-> Plane-Wave Spectrum","text":"","category":"section"},{"location":"operations/interactions/#Far-Field-Pattern-Far-Field-Pattern","page":"Transmission Between Field Representations","title":"Far-Field Pattern <-> Far-Field Pattern","text":"","category":"section"},{"location":"operations/interactions/#Far-Field-Pattern-Plane-Wave-Spectrum","page":"Transmission Between Field Representations","title":"Far-Field Pattern <-> Plane-Wave Spectrum","text":"","category":"section"},{"location":"spherical/spherical_representations/#Representing-Antenna-Fields-with-Spherical-Mode-Expansions","page":"Spherical Mode Representations","title":"Representing Antenna Fields with Spherical Mode Expansions","text":"","category":"section"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"One of the most popular ways to represent an antenna field is by a spherical mode expansion.","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"In AntennaFieldRepresentations.jl, spherical expansions are represented by a struct SphericalWaveExpansion{P, H, C} which is a subtype of AntennaFieldRepresentation{P, C}. The type parameters have the following meaning","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"Parameter Short Description\nP <: PropagationType Can be Radiated, Absorbed, or Incident\nH <: AbstractSphericalCoefficients{C}} Type of spherical expansion coefficients. Can be SphericalCoefficients{C} for general spherical coefficients or FirstOrderSphericalCoefficients{C} for first-order spherical coefficients\nC <: Complex Element type of the coefficient vector","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"note: Note\nVery efficient algorithms - e.g., for the transmission - arise when aSphericalWaveExpansion is paired with a SphericalFieldSampling.","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"","category":"page"},{"location":"spherical/spherical_representations/#Constructors-for-a-SphericalWaveExpansion","page":"Spherical Mode Representations","title":"Constructors for a SphericalWaveExpansion","text":"","category":"section"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"To generate a SphericalWaveExpansion, use one of the following constructors:","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"SphericalWaveExpansion{P, H, C}(coefficients::H, wavenumber <: Number) where{P <: PropagationType, C <: Complex, H<: AbstractSphericalCoefficients{C}}","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"SphericalWaveExpansion(::P, coefficients::AbstractVector{C}, wavenumber) where{P <: PropagationType, C}","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"The input arguments for the costructors are","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"P <: PropagationType : Can be Radiated, Absorbed, or Incident\ncoefficients: Coefficient vector. Can be either a struct of SphericalCoefficients{C}, a struct of FirstOrderSphericalCoefficients{C}, or an AbstractVector{C}\nwavenumber : Wavenumber omega = 2pi  f","category":"page"},{"location":"spherical/spherical_representations/#abstractsphericalcoeficients","page":"Spherical Mode Representations","title":"The AbstractSphericalCoefficients{C} Type","text":"","category":"section"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"As described in more detail in the theory section, a spherical mode expansion is characterized by the expansion coefficents alpha_s ell m with s in 12, ell = 1ldots L, and m = -ell ldots ell.","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"In the numerical implementation, the coefficients alpha_s ell m are stored in a vector, where the triple index s ell m is mapped to a single consecutively running index j by the function sℓm_to_j(s,ℓ,m). The inverse map from a single index to the triple index s ell m is implemented in the function j_to_sℓm(j).  This behaviour is implemented in implementations of the abstract type AbstractSphericalCoefficients{C}. Instances of an AbstractSphericalCoefficients{C} can be accessed like an AbstractVector{C} with a single index j or with a triple index (s,ℓ,m), where j = 2 * (ℓ * (ℓ + 1) + m - 1) + s as in the following example","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"Example:            ","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"julia> using AntennaFieldRepresentations\n\njulia> sph_coefficients= SphericalCoefficients(ComplexF64.(collect(1:16)))\n16-element SphericalCoefficients{ComplexF64}:\n  1.0 + 0.0im\n  2.0 + 0.0im\n  3.0 + 0.0im\n  4.0 + 0.0im\n  5.0 + 0.0im\n  6.0 + 0.0im\n  7.0 + 0.0im\n  8.0 + 0.0im\n  9.0 + 0.0im\n 10.0 + 0.0im\n 11.0 + 0.0im\n 12.0 + 0.0im\n 13.0 + 0.0im\n 14.0 + 0.0im\n 15.0 + 0.0im\n 16.0 + 0.0im\n\njulia> println(sph_coefficients[9]) # Here the coefficient vector is accessed with a single index\n9.0 + 0.0im\n\njulia> println(sph_coefficients[1, 2, -1]) # Here the same element is accessed with a triple index\n9.0 + 0.0im\n\njulia> sph_coefficients[1, 2, -1] = 111.0im; # setindex!() is also defined\n\njulia> println(sph_coefficients[9])\n0.0 + 111.0im","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"Besides the general SphericalCoefficients{C}, also the type FirstOrderSphericalExpansion{C} exists in AntennaFieldRepresentations.jl. A FirstOrderSphericalExpansion{C} indicates that all spherical expansion coefficients alpha_s ell m with m neq 1 are equal to zero. First-order spherical expansions do play a special role in the development of fast algorithms for spherical wave expansions and, thus, have their own representation in AntennaFieldRepresentations.jl. When a FirstOrderSphericalExpansion{C} is generated from an AbstractVector{C}, all elements which do not correspond to a triple index with m=1 are ignored. ","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"Use the following constructors to generate a struct of AbstractSphericalCoefficients{C}","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"SphericalCoefficients(v::AbstractVector{C}) where{C <: Number}","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"FirstOrderSphericalCoefficients(v::AbstractVector{C}) where{C <: Number}","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"note: Note\nSince a vector of type SphericalCoefficients is itself a subtype of AbstractVector, we can easily convert a vector of SphericalCoefficients into a vector of first-order spherical coefficients via FirstorderSphericalCoefficients(x::SphericalCoefficients)Converting a an arbitrary AbstractVector into a FirstOrderSphericalCoefficients-vector drops all entries which correspond to non-first-order modes.    ","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"","category":"page"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"julia> fo_sph_coefficients= FirstOrderSphericalCoefficients(sph_coefficients)\n16-element FirstOrderSphericalCoefficients{ComplexF64}:\n  1.0 + 0.0im\n  2.0 + 0.0im\n  0.0 + 0.0im\n  0.0 + 0.0im\n  5.0 + 0.0im\n  6.0 + 0.0im\n  0.0 + 0.0im\n  0.0 + 0.0im\n  0.0 + 111.0im\n 10.0 + 0.0im\n  0.0 + 0.0im\n  0.0 + 0.0im\n 13.0 + 0.0im\n 14.0 + 0.0im\n  0.0 + 0.0im\n  0.0 + 0.0im","category":"page"},{"location":"spherical/spherical_representations/#Spherical-Expansion-Examples","page":"Spherical Mode Representations","title":"Spherical Expansion Examples","text":"","category":"section"},{"location":"spherical/spherical_representations/","page":"Spherical Mode Representations","title":"Spherical Mode Representations","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/spherical_expansion_dark.png\" width=\"750\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/spherical_expansion_light.png\" width=\"750\" >\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    The dipoles are visualized as arrows in this example.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"surfacecurrents/surface_representations/#Representing-Antenna-Fields-with-Equivalent-Surface-Currents","page":"Equivalent Surface Currents","title":"Representing Antenna Fields with Equivalent Surface Currents","text":"","category":"section"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"The Huygens Principle tells us that the radiated fields of any source distribution confined within a certain volume V can also be reproduced by equivalent surface currents on the surface partial V of the source volume.","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"In AntennaFieldRepresentations.jl, surface current densities are represented by a struct SurfaceCurrentDensity{P, E, B, C} which is a subtype of AntennaFieldRepresentation{P, C}. The type parameters have the following meaning","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"Parameter Short Description\nP <: PropagationType Can be Radiated, Absorbed, or Incident\nE <: ElmagType Can be Electric or Magnetic\nB <: BEAST.Space Finite Element space used for expanding the surface currents. Can be any BEAST.Space{T} where{T <: Real} from BEAST.jl .\nC <: Complex Element type of the coefficient vector","category":"page"},{"location":"surfacecurrents/surface_representations/#Constructors-for-a-SurfaceCurrentDensity","page":"Equivalent Surface Currents","title":"Constructors for a SurfaceCurrentDensity","text":"","category":"section"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"To generate a SurfaceCurrentDensity, use one of the following constructors:","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"SurfaceCurrentDensity{P, E, B, C}(functionspace::B, coefficients::AbstractVector{C}, wavenumber <: Number) where{P <: PropagationType, E <: ElmagType, B <: BEAST.Space{T} where{T <: Real}, C <: Complex}","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"SurfaceCurrentDensity(::P, ::E, functionspace::B, coefficients::AbstractVector{C}, wavenumber <: Number) where{P <: PropagationType, E <: ElmagType, B <: BEAST.Space{T} where{T <: Real}, C <: Complex}","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"SurfaceCurrentDensity(::P, ::E, functionspace::B, wavenumber <: Number) where{P <: PropagationType, E <: ElmagType, B <: BEAST.Space{T} where{T <: Real}, C <: Complex}","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"The input arguments for the costructors are","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"P <: PropagationType : Can be Radiated, Absorbed, or Incident\nE <: Elmagtype : Can be Electric or magnetic\ncoefficients: Coefficient vector. Can be an AbstractVector{C}. If no coefficients vector is given, a zero-filled Vector{C} of appropriate size will be created for initialization.\nB <: BEAST.Space : An object which defines the (triangulated) geometry of the Huygens surface and the space of basis funtions for expanding the surface currents. Refer to the The BEAST.Space Type-section for more detailed information\nwavenumber : Wavenumber omega = 2pi  f","category":"page"},{"location":"surfacecurrents/surface_representations/#beastspace","page":"Equivalent Surface Currents","title":"The BEAST.Space Type","text":"","category":"section"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"We don't have to reinvent the wheel. BEAST.jl has many relevant surface current expansions already implemented. The documentation for BEAST.jl can be found here and it is recommended to have a look at the tutorial and the examples to get used with its general usage.","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"tip: Tip\nIt is not strictly necessary to load BEAST.jl or CompScienceMeshes.jl but the process of generating the geometry and functionspace structs is much simpler once they are loaded via using BEAST, CompScienceMeshes","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"Creating a BEAST.Space-object contains two steps: Creating the geometry (a mesh) and defining a Finite Element space on this geometry.","category":"page"},{"location":"surfacecurrents/surface_representations/#Creating-the-Geometry-(the-Mesh)","page":"Equivalent Surface Currents","title":"Creating the Geometry (the Mesh)","text":"","category":"section"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"First, we need to define a mesh.  The package CompScienceMeshes provides data structures and algorithms for working with simplical meshes in computational science. We can create a mesh from scratch for very simple meshes, e.g., by","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"using CompScienceMeshes\n\nmeshsize = 0.1\nsidelengthA = 1.0\nsidelengthB = 1.0\n\nΓ = CompScienceMeshes.meshrectangle(sidelengthA, sidelengthB, triangle_sidelength)","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"or ","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"using CompScienceMeshes\n\nradius = 1.0\nmeshsize = 0.1\n\nΓ = CompScienceMeshes.meshsphere(radius, meshsize)","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"More elaborate meshes can be created with a meshing tool like gmsh [1]. The meshes created by gmsh (usually stored in a .msh-file) can be loaded for our use with","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"using CompScienceMeshes\n\nΓ = CompScienceMeshes.read_gmsh_mesh(\"example_box.msh\")","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"[1]: The API of gmsh can be accessed via the julia package Gmsh.jl. ","category":"page"},{"location":"surfacecurrents/surface_representations/#Defining-the-Finite-Element-Space","page":"Equivalent Surface Currents","title":"Defining the Finite Element Space","text":"","category":"section"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"Creating the finite element space is easy in BEAST.jl. Several, easy to use constructor functions exist to create many of the most widely used Finite Element spaces for surface current expansion. To create a set of Rao-Wilton-Glisson basis functions on a previously defined triangular mesh Γ, use [2]","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"using BEAST\n\nβ = BEAST.raviartthomas(Γ)","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"At the moment, Rao-Wilton-Glisson (RWG) basis functions are the only type of Finite Element space which is tested to work with AntennaFieldRepresentations.jl. However, many more Finite Element spaces are defined by BEAST.jl which might just \"work out of the box\" (go ahead and try if you dare and let us know how it worked out for you):","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"For rotated RWG (more technically: bmn timesRWG) functions, use (the × symbol can be typed in the REPL by typing \\times followed by [TAB])","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"using BEAST\n\nβ = BEAST.n × BEAST.raviartthomas(Γ)","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"For Buffa-Christiansen basis functions use","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"using BEAST\n\nβ = BEAST.buffachristiansen(Γ)","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"More Finite Element spaces can be found by consulting the source code of BEAST.jl.","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"[2]: Rao-Wilton-Glisson basis functions are sometimes called Raviat-Thomas basis functions (https://en.wikipedia.org/wiki/Raviart%E2%80%93Thomasbasisfunctions).","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"todo: Todo\nDocument complete API ...","category":"page"},{"location":"surfacecurrents/surface_representations/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"","category":"page"},{"location":"operations/coordinate_trafos/#Field-Representations-in-Transformed-Coordinate-Systems","page":"Coordinate Transformations","title":"Field Representations in Transformed Coordinate Systems","text":"","category":"section"},{"location":"operations/coordinate_trafos/","page":"Coordinate Transformations","title":"Coordinate Transformations","text":"todo: Todo\nComing soon ...","category":"page"},{"location":"operations/coordinate_trafos/","page":"Coordinate Transformations","title":"Coordinate Transformations","text":"","category":"page"},{"location":"operations/coordinate_trafos/#Rotated-Coordinate-System","page":"Coordinate Transformations","title":"Rotated Coordinate System","text":"","category":"section"},{"location":"operations/coordinate_trafos/","page":"Coordinate Transformations","title":"Coordinate Transformations","text":"todo: Todo\nComing soon ...","category":"page"},{"location":"operations/coordinate_trafos/","page":"Coordinate Transformations","title":"Coordinate Transformations","text":"","category":"page"},{"location":"operations/coordinate_trafos/#Translated-Coordinate-System","page":"Coordinate Transformations","title":"Translated Coordinate System","text":"","category":"section"},{"location":"operations/coordinate_trafos/","page":"Coordinate Transformations","title":"Coordinate Transformations","text":"todo: Todo\nComing soon ...","category":"page"},{"location":"operations/coordinate_trafos/","page":"Coordinate Transformations","title":"Coordinate Transformations","text":"","category":"page"},{"location":"dipoles/dipole_examples/#Dipole-to-Dipole-Interactions","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"","category":"section"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"The interaction between two elementary dipoles is modeled by letting one of the dipoles generate an electromagnetic field, which is therafter received by the other dipole.","category":"page"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"Since the recieved signal of a Hertzian dipole is directly proportional to the parallel component of the incident electric field at the dipole position, the received signals of Hertzian dipoles can be used to ideally probe the electric field. The interaction between two Hertzian dipoles can be used to represent the radiated electric field of one of the dipoles at the location of the other dipole.","category":"page"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"Since the recieved signal of a Fitzgerald dipole is directly proportional to the parallel component of the negative incident magnetic field at the dipole position, the received signals of Fitzgerald  dipoles can be used to ideally probe the magnetic field. The interaction between two Fitzgerald dipoles can be used to represent the radiated magnetic field of one of the dipoles at the location of the other dipole.","category":"page"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"The detailed derivation can be found in the \"Theory\" section. The interaction between two dipoles is implemented in the function (TODO: insert correct function) Each elementary dipole is defined by its position bmr, its oriented length bmell and its excitation magnitude I. Hertzian and Fitzgerald dipoles may be constructed using the constructors as in the following example.","category":"page"},{"location":"dipoles/dipole_examples/#Interaction-between-two-Hertzian-Dipoles","page":"Dipole to Dipole Interactions","title":"Interaction between two Hertzian Dipoles","text":"","category":"section"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"Let I_1, bmell_1, and bmr_1 denote the excitation, oriented (equivalent) length, and location of the transmitting Hertzian dipole and let I_2, bmell_2, and bmr_2 be the excitation, oriented (equivalent) length, and location of the receiving Hertzian dipole. The received signal which represents the interaction between these two dipoles is given by","category":"page"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"b=\ndfrac-mathrmj2 k_0 Z_mathrmF I_1 I_2\nleft\nleft(\ndfrac3k^2bmr_2-bmr_1^2\n+\ndfrac3mathrmjkbmr_2-bmr_1 \n-1   \nright)\ng_0(bmr_2bmr_1)\n\nleft(bmell_2 cdot bme_rright) left(bme_r cdot bmell_1right)\n-\nleft(\ndfracmathrmjkbmr_2-bmr_1\n+dfrac1k^2bmr_2-bmr_1^2\n-1\nright)\ng_0(bmr_2bmr_1)\n\nleft(bmell_2 cdot bmell_1\nright)\nright ","category":"page"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"where bme_r denotes the unit vector pointing in the direction from one dipole location to the other.","category":"page"},{"location":"dipoles/dipole_examples/#Interaction-between-two-Fitzgerald-Dipoles","page":"Dipole to Dipole Interactions","title":"Interaction between two Fitzgerald Dipoles","text":"","category":"section"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"Let I_mathrmm1, bmell_1, and bmr_1 denote the excitation, oriented (equivalent) length, and location of the transmitting Fitzgerald dipole and let I_mathrmm2, bmell_2, and bmr_2 be the excitation, oriented (equivalent) length, and location of the receiving Fitzgerald dipole. The received signal which represents the interaction between these two dipoles is given by","category":"page"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"b=\ndfrac-mathrmj2 dfrack_0Z_mathrmF I_mathrmm1 I_mathrmm2\nleft\nleft(\ndfrac3k^2bmr_2-bmr_1^2\n+\ndfrac3mathrmjkbmr_2-bmr_1 \n-1   \nright)\ng_0(bmr_2bmr_1)\n\nleft(bmell_2 cdot bme_rright) left(bme_r cdot bmell_1right)\n-\nleft(\ndfracmathrmjkbmr_2-bmr_1\n+dfrac1k^2bmr_2-bmr_1^2\n-1\nright)\ng_0(bmr_2bmr_1)\n\nleft(bmell_2 cdot bmell_1\nright)\nright ","category":"page"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"where bme_r denotes the unit vector pointing in the direction from one dipole location to the other.","category":"page"},{"location":"dipoles/dipole_examples/#Interaction-between-Hertzian-and-Fitzgerald-Dipole","page":"Dipole to Dipole Interactions","title":"Interaction between Hertzian and Fitzgerald Dipole","text":"","category":"section"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"Let I_1, bmell_1, and bmr_1 denote the excitation, oriented (equivalent) length, and location of the transmitting Hertzian dipole and let I_mathrmm2, bmell_2, and bmr_2 be the excitation, oriented (equivalent) length, and location of the receiving Fitzgerald dipole. The received signal which represents the interaction between these two dipoles is given by","category":"page"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"b= dfrac12\nI_1 I_mathrmm2\nleft(-mathrmjk-dfrac1bmr-bmrright) bmell_2 cdot left( bme_r times bmell_1right)","category":"page"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"where bme_r denotes the unit vector pointing in the direction from one dipole location to the other.","category":"page"},{"location":"dipoles/dipole_examples/","page":"Dipole to Dipole Interactions","title":"Dipole to Dipole Interactions","text":"The role of the transmitting and the receiving dipole may be exchanged without changing the result of the calculation (i.e., the electric field of a Fitzgerald dipole matches the electric field of a Fitzgerald dipole).","category":"page"},{"location":"planewaves/planewave_examples/#TODO:-generate-content","page":"TODO: generate content","title":"TODO: generate content","text":"","category":"section"},{"location":"sampling/fieldsamplings/#fieldsampling","page":"General Field Sampling Interface","title":"Sampling Setups for Antenna Fields","text":"","category":"section"},{"location":"sampling/fieldsamplings/","page":"General Field Sampling Interface","title":"General Field Sampling Interface","text":"In electromagnetic field solvers a concept called field monitor or field request (or similiar) is very common: The desired electromagnetic fields are not calculated everywhere in space but only on a limited set of points defined in the field request. This saves resources and makes the computation of the electromagnetic fields feasible in the first place.","category":"page"},{"location":"sampling/fieldsamplings/","page":"General Field Sampling Interface","title":"General Field Sampling Interface","text":"In AntennaFieldRepresentations.jl, a similar concept exists. A FieldSampling is a struct which defines the positions in which the electromagnetic fields of an AntennaFieldrepresentation shall be sampled. Furthermore, many Fieldsamplings allow to take the receive pattern of a realistic probe antenna into account. This way, rather complex and realistic antenna measurement setups can be modelled.","category":"page"},{"location":"sampling/fieldsamplings/","page":"General Field Sampling Interface","title":"General Field Sampling Interface","text":"A FieldSampling can be used to create a TransmissionMap, a functional relationship between the coefficients of an AntennaFieldRepresentation and the output signals of the probe antennas defined by the FieldSampling[1].  The TransmissionMap serves as a linear operator (a matrix) between the coefficient vector of the AntennaFieldRepresentation and the vector of output signals of the probe antennas. Depending on the specific types of the AntennaFieldRepresentation and the FieldSampling, the algorithm implementing the matrix-vector product for the TransmissionMap will change.  Particularly efficient algorithms arise for certain combinations of AntennaFieldRepresentations and FieldSamplings. ","category":"page"},{"location":"sampling/fieldsamplings/","page":"General Field Sampling Interface","title":"General Field Sampling Interface","text":"Every FieldSampling reserves a storage for the measured values of the S_21-parameter between the probe antennas and an AntennaFieldRepresentation. Internally, the storage can have various forms to best match the situation described by the FieldSampling implementation. However, all FieldSamplings implement a common interface which let the user access the storage for the measured S_21-parameters a Base.AbstractVector.","category":"page"},{"location":"sampling/fieldsamplings/","page":"General Field Sampling Interface","title":"General Field Sampling Interface","text":"tip: Tip\nImplementations of the type FieldSampling support the interface of Base.AbstractVector. In particular the methods Base.getindex and Base.setindex! are supported which allow to access the measurement vector by indexing the struct representing the fields directly by square brackets [].","category":"page"},{"location":"sampling/fieldsamplings/","page":"General Field Sampling Interface","title":"General Field Sampling Interface","text":"","category":"page"},{"location":"sampling/fieldsamplings/#FieldSampling-Interface","page":"General Field Sampling Interface","title":"FieldSampling Interface","text":"","category":"section"},{"location":"sampling/fieldsamplings/","page":"General Field Sampling Interface","title":"General Field Sampling Interface","text":"Any subtype of FieldSampling implements the following methods[2]:","category":"page"},{"location":"sampling/fieldsamplings/","page":"General Field Sampling Interface","title":"General Field Sampling Interface","text":"Method name Optional Fallback method Short Description\nBase.size No  See interface of Base.AbstractVector\nBase.getindex! No  See interface of Base.AbstractVector\nBase.setindex No  See interface of Base.AbstractVector\nBase.similar No  See interface of Base.AbstractVector\nasvector No  Return the measurement samples as a vector","category":"page"},{"location":"sampling/fieldsamplings/","page":"General Field Sampling Interface","title":"General Field Sampling Interface","text":"[1]: Hertzian dipoles (short electric dipoles) and Fitzgerald dipoles (short magnetic dipoles) can formally be used as probe antennas to directly sample electric and magnetic fields of an AntennaFieldRepresentation: Their output signals are directly proportional to the electric and magnetic field component which is parallel to their dipole orientation, respectively.","category":"page"},{"location":"sampling/fieldsamplings/","page":"General Field Sampling Interface","title":"General Field Sampling Interface","text":"[2]: Note for developers: If you want to implement your own subtype of FieldSampling, make sure to support this interface to adhere to the general functionality of this package. ","category":"page"},{"location":"api/#API-Reference","page":"API","title":"API Reference","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"note: Note\nThis API reference is a comprehensive list of public types and public functions. Any change in the documented signature of these functions or methods is considered \"breaking\" and will trigger an increase in the \"major\" version number.All types or functions which are not mentioned on this page are considered private to AntennaFieldRepresentations.jl. Private functions can vary drastically between minor version updates and the enduser should not rely on these internal functions and types.","category":"page"},{"location":"api/","page":"API","title":"API","text":"","category":"page"},{"location":"api/#Public-Types","page":"API","title":"Public Types","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"Modules = [AntennaFieldRepresentations]\nPrivate = false\nOrder= [:type]","category":"page"},{"location":"api/#AntennaFieldRepresentations.AbstractSphericalCoefficients","page":"API","title":"AntennaFieldRepresentations.AbstractSphericalCoefficients","text":"AbstractSphericalCoefficients{C <: Number }\n\nSupertype for collections of spherical coefficients.\n\nCan be accessed like an AbstractVector{C} with a single index j or with a triple index (s,ℓ,m), where j = 2 * (ℓ * (ℓ + 1) + m - 1) + s.\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.AntennaFieldRepresentation","page":"API","title":"AntennaFieldRepresentations.AntennaFieldRepresentation","text":"AntennaFieldRepresentation{P <: PropagationType, C <: Number} <: AbstractVector{C}\n\nEquivalent representation of the electromagnetic fields of an antenna (in a certain region of space where the representation converges).\n\nEach instance of AntennaFieldRepresentation is a discretized version of the antenna fields, i.e., a collection of coefficients from which the antenna fields can be (approximately) calculated. The coefficents of the field representation can be accessed via the interface of AbstractVector{C}. In addition to the field coefficients, each instance of AntennaFieldRepresentation stores additional information which allows to calculate the electromagnetic fields from the coefficient vector. In particular, the wavenumber of the radiation frequency of the antenna field is stored.\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.ChangeRepresentationMap","page":"API","title":"AntennaFieldRepresentations.ChangeRepresentationMap","text":"ChangeRepresentationMap{A, B, C} <: LinearMaps.LinearMap{C}\n\nSupertype for linear map which corresponds to a changerepresentation method.\n\nType Parameters\n\nA <: AntennaFieldRepresentation : Type of the original representation\nB <: AntennaFieldRepresentation : Type of the target representation\nC <: Complex\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.DipoleArray","page":"API","title":"AntennaFieldRepresentations.DipoleArray","text":"DipoleArray{P, E, T, C} <: AntennaFieldRepresentation{P, C}\n\nArray of multiple small dipoles.\n\nBehaves like an AbstractVector{C} with extra context.\n\nType Parameters\n\nP <: PropagationType\nE <: ElmagType\nT <: Number\nC <: Number\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.ElmagType","page":"API","title":"AntennaFieldRepresentations.ElmagType","text":"ElmagType\n\nIndicator for Electric or Magnetic type field expansions. \n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.FieldSampling","page":"API","title":"AntennaFieldRepresentations.FieldSampling","text":"FieldSampling{C}\n\nAbstract type for various field samplings.\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.FirstOrderSphericalCoefficients","page":"API","title":"AntennaFieldRepresentations.FirstOrderSphericalCoefficients","text":"FirstOrderSphericalCoefficients{C} <: AbstractSphericalCoefficients{C}\n\nSparse representation of a collections of only first-order coefficients for a spherical wave expansion. \n\nCan be accessed like an AbstractVector{C} with a single index j or with a triple index (s,ℓ,m), where j = 2 * (ℓ * (ℓ + 1) + m - 1) + s. All coefficients with m ≠ ± 1 are zero by definition.\n\nExamples\n\nvalues=ComplexF64.(collect(1:16))\nsph_coefficients= SphericalCoefficients(values)\nfirstorder_sph_coefficients = FirstOrderSphericalCoefficients(sph_coefficients)\nprintln(firstorder_sph_coefficients[1, 2, -1])\nfirstorder_sph_coefficients[1, 2, -1] = 111.0 im \nprintln(firstorder_sph_coefficients[9])\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.FirstOrderSphericalCoefficients-Union{Tuple{SphericalCoefficients{C}}, Tuple{C}} where C<:Number","page":"API","title":"AntennaFieldRepresentations.FirstOrderSphericalCoefficients","text":"FirstOrderSphericalCoefficients(coefficients::SphericalCoefficients)\n\nReturn sparse representation of a collections of only first-order spherical coefficients. All non-first-order coefficients (index m ≠ ±1) are dropped and treated as zero.\n\nExamples\n\nvalues=ComplexF64.(collect(1:16))\nsph_coefficients= SphericalCoefficients(values)\nfirstorder_sph_coefficients = FirstOrderSphericalCoefficients(sph_coefficients)\nprintln(firstorder_sph_coefficients[1, 2, -1])\nprintln(firstorder_sph_coefficients[1, 2, -2])\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.FitzgeraldArray","page":"API","title":"AntennaFieldRepresentations.FitzgeraldArray","text":"FitzgeraldArray{T, C}\n\nAlias for DipoleArray{Radiated,Magnetic,T,C}\n\nA FitzgeraldArray is used to represent an array of multiple small radiating magnetic dipoles.     Behaves like an AbstractVector{C} with extra context.\n\nType Parameters\n\nT <: Number\nC <: Number\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.GaussLegendreθRegularϕSampling","page":"API","title":"AntennaFieldRepresentations.GaussLegendreθRegularϕSampling","text":"GaussLegendreθRegularϕSampling <: SphereSamplingStrategy\n\nSampling strategy on the sphere with regular sampling along ϕ and Gauß-Legendre-Sampling along θ.\n\nϕ ∈ {0, Δϕ, …, 2π - Δϕ} with Δϕ= 2π / (2L + 2).  θ ∈ {acos(xᵢ)} where xᵢ are the Nθ-point Gauß-Legendre quadrature points.\n\nFields\n\nNθ::Integer\nJϕ::Integer\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.HertzArray","page":"API","title":"AntennaFieldRepresentations.HertzArray","text":"HertzArray{T, C}\n\nAlias for DipoleArray{Radiated,Electric,T,C}\n\nA HertzArray is used to represent an array of multiple small radiating electric dipoles.     Behaves like an AbstractVector{C} with extra context.\n\nType Parameters\n\nT <: Number\nC <: Number\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.InterpolateMap","page":"API","title":"AntennaFieldRepresentations.InterpolateMap","text":"InterpolateMap{Y, T} <: LinearMaps.LinearMap{T}\n\nAbstract supertype for linear maps which performs an interpolation of predefined sampling points from spherically sampled data.\n\nType parameters:\n\nY :: SphereSamplingStrategy : Defines the sampling points of the spherically sampled original data.\nT <: Real : Defines the number type to represent interpolation parameters, e.g. Float64 or Float32.\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.IrregularFieldSampling","page":"API","title":"AntennaFieldRepresentations.IrregularFieldSampling","text":"IrregularFieldSampling{N, T, C}\n\nField sampling with arbitrary probes at irregularly distributed measurement positions.\n\nType Parameters\n\nN <: ProbeAntenna\nT <: Real\nC <: Complex\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.IrregularFieldSampling-Union{Tuple{P}, Tuple{D}, Tuple{V}, Tuple{Array{V}, Array{D}, Array{<:Integer}, Vector{P}}} where {V, D, P<:ProbeAntenna}","page":"API","title":"AntennaFieldRepresentations.IrregularFieldSampling","text":"IrregularFieldSampling(positions::Array{V}, eulerangles::Array{D}, probeIDs::Array{<:Integer}, probes::Vector{P}) where{V, D, P<:ProbeAntenna}\n\nReturns an IrregularFieldSampling struct for sampling an AntennaFieldRepresentation with arbitrary probes at irregularly distributed measurement positions.\n\nInputs:\n\npositions::Array{V} : An array of 3D position vectors. Julia must be able to convert the type V into an SVector{3,T<:Real}.\neulerangles::Array{D} : An array of 3-Tuples denoting the Euler angles ϑ, φ, and χ for rotating the probe antenna at each sample position. Julia must be able to convert the type D into a Tuple{T,T,T}}.\nprobeIDs::Array{<:Integer} : Array of probeIDs (= indices) to assign a probe from the list probes to each sample.\nprobes::Vector{P<:ProbeAntenna}: Vector of probe antennas which occur in the field sampling \n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.LocalθLocalϕInterpolateMap","page":"API","title":"AntennaFieldRepresentations.LocalθLocalϕInterpolateMap","text":"LocalθLocalϕInterpolateMap{Y,orderθ,orderϕ,T} <: InterpolateMap{Y,T}\n\nLinear map which performs a local interpolation of predefined sampling points from spherically sampled data.\n\nType parameters\n\nY :: SphereSamplingStrategy : Defines the sampling points of the spherically sampled original data.\norderθ : Integer which defines the interpolation order along  θ.\norderϕ : Integer which defines the interpolation order along  ϕ.\nT <: Real : Defines the number type to represent interpolation parameters, e.g. Float64 or Float32.\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.PlaneWaveExpansion","page":"API","title":"AntennaFieldRepresentations.PlaneWaveExpansion","text":"PlaneWaveExpansion{P,Y,C} <: AntennaFieldRepresentation{P,C}\n\nCollection of electromagnetic plane waves propagating into various directions.\n\nBehaves like an AbstractVector{C} with extra context.\n\nType Parameters\n\nP <: PropagationType\nY <: SphereSamplingStrategy : Defines the propagation directions of the  stored plane wave samples\nC <: Number\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.PlaneWaveExpansion-Union{Tuple{C}, Tuple{S}, Tuple{P}, Tuple{P, S, Matrix{C}, Matrix{C}, Number}} where {P<:PropagationType, S<:SphereSamplingStrategy, C}","page":"API","title":"AntennaFieldRepresentations.PlaneWaveExpansion","text":"PlaneWaveExpansion(P, samplingstrategy, Eθ, Eϕ, wavenumber)\n\nReturns a collection of electromagnetic plane waves propagating into various directions.\n\nArguments:\n\nP::PropagationType: Radiated(), Incident(), or Absorbed()\nsamplingstrategy<:SphereSamplingStrategy: sampling strategy which defines the propagation directions of the plane wave samples\nEθ::Matrix{C}: θ-component amplitudes of the plane waves\nEϕ::Matrix{C}: ϕ-component amplitudes of the plane waves\nwavenumber: wavenumber\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.ProbeAntenna","page":"API","title":"AntennaFieldRepresentations.ProbeAntenna","text":"ProbeAntenna{A}\n\nWrapper around an AntennaFieldRepresentation to indicate that it is used as a probe.\n\nType Parameters\n\nA <: AntennaFieldRepresentation\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.PropagationType","page":"API","title":"AntennaFieldRepresentations.PropagationType","text":"PropagationType\n\nIndicator for Radiated, Absorbed, or Incident type field expansions. \n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.RegularθRegularϕSampling","page":"API","title":"AntennaFieldRepresentations.RegularθRegularϕSampling","text":"RegularθRegularϕSampling <: SphereSamplingStrategy\n\nA regular sampling strategy on the sphere has samples equiangularly distributed along the θ- and ϕ-coordinates.\n\nϕ ∈ {0, Δϕ, …, 2π - Δϕ} with Δϕ= 2π / Jϕ. θ ∈ {0, Δθ, …, π - Δθ / 2} if Jθ is odd or θ ∈ {0, Δθ, …, π} if Jθ is even with Δθ = 2π / Jθ if Jθ.\n\nFields:\n\nJθ :: Integer\nJϕ :: Integer\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.SphereSamplingStrategy","page":"API","title":"AntennaFieldRepresentations.SphereSamplingStrategy","text":"SphereSamplingStrategy\n\nSupertype for sampling strategies on a sphere. \n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.SphericalCoefficients","page":"API","title":"AntennaFieldRepresentations.SphericalCoefficients","text":"SphericalCoefficients{C} <: AbstractSphericalCoefficients{C}\n\nCollections of coefficients for a spherical wave expansion. \n\nCan be accessed like an AbstractVector{C} with a single index j or with a triple index (s,ℓ,m), where j = 2 * (ℓ * (ℓ + 1) + m - 1) + s.\n\nExamples\n\nvalues=ComplexF64.(collect(1:16))\nsph_coefficients= SphericalCoefficients(values)\nprintln(sph_coefficients[9])\nprintln(sph_coefficients[1, 2, -1])\nsph_coefficients[1, 2, -1] = 111.0im\nprintln(sph_coefficients[9])\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.SphericalFieldSampling","page":"API","title":"AntennaFieldRepresentations.SphericalFieldSampling","text":"SphericalFieldSampling{Y,H,C} <: FieldSampling{C}\n\nField sampling on spherical measurement surface with measurement positions distributed according to a SphereSamplingStrategy.\n\nType Parameters\n\nY <: SphereSamplingStrategy\nH <: AbstractSphericalCoefficients\nC <: Complex\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.SphericalTransmitMap","page":"API","title":"AntennaFieldRepresentations.SphericalTransmitMap","text":"SphericalTransmitMap{S,F,C} <: TransmitMap{S,F,C}\n\nLinear map which corresponds to a transmit method between a SphericalWaveExpansion{Radiated} and a SphericalFieldSampling.\n\nType Parameters\n\nS <: SphericalWaveExpansion{Radiated}\nF <: SphericalFieldSampling\nC <: Complex\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.SphericalWaveExpansion","page":"API","title":"AntennaFieldRepresentations.SphericalWaveExpansion","text":"SphericalWaveExpansion{P,H,C} <: AntennaFieldRepresentation{P, C}\n\nRepresentation of an electromagnetic field as superposition spherical vector wave functions.\n\nBehaves like an AbstractVector{C} with extra context.\n\nType parameters\n\nP <: PropagationType\nH <: AbstractSphericalCoefficients{C <: Number} : defines how the spherical coefficients are ordered in memory.\nC <: Complex\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.SurfaceCurrentDensity","page":"API","title":"AntennaFieldRepresentations.SurfaceCurrentDensity","text":"SurfaceCurrentDensity{P <: PropagationType, E <: ElmagType, S <: BEAST.Space{<: Real} , C}  <: AntennaFieldRepresentation{P, C}\n\nRepresentation of an electromagnetic field via equivalent surface currents.\n\nBehaves like an AbstractVector{C} with extra context. The type parameter E defines if electric or magnetic surface current density.\n\n\n\n\n\n","category":"type"},{"location":"api/#AntennaFieldRepresentations.TransmitMap","page":"API","title":"AntennaFieldRepresentations.TransmitMap","text":"TransmitMap{A, F, C} <: OperationMap{A, C}\n\nSupertype for function-like object which corresponds to a transmit method.\n\nType Parameters\n\nA <: AntennaFieldRepresentation\nF <: FieldSampling\nC <: Complex\n\n\n\n\n\n","category":"type"},{"location":"api/#Public-Functions","page":"API","title":"Public Functions","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"Modules = [AntennaFieldRepresentations]\nPrivate = false\nOrder = [:function]","category":"page"},{"location":"api/#AntennaFieldRepresentations.EfieldSampling-Union{Tuple{Vector{V}}, Tuple{V}} where V","page":"API","title":"AntennaFieldRepresentations.EfieldSampling","text":"EfieldSampling(positions::Vector{V})\n\nReturns an IrregularFieldSampling struct for sampling the electric field of an AntennaFieldRepresentation at given positions with Hertzian dipole probes.\n\nFor an input vector positions containing N position entries, the resulting IrregularFieldSampling provides the S₂₁-measurement signal in a N × 3 matrix,  where the coloumns correspond to the x-, y-, and z-component of the E-field, respectively.\n\nInput:\n\npositions::Vector{V} : A vector of 3D position vectors. Julia must be able to convert the type V into an SVector{3,T<:Real}. \n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.HfieldSampling-Union{Tuple{Vector{V}}, Tuple{V}} where V","page":"API","title":"AntennaFieldRepresentations.HfieldSampling","text":"HfieldSampling(positions::Vector{V})\n\nReturns an IrregularFieldSampling struct for sampling the magnetic field of an AntennaFieldRepresentation at given positions with Fitzgerald dipole probes.\n\nFor an input vector positions containing N position entries, the resulting IrregularFieldSampling provides the S₂₁-measurement signal in a N × 3 matrix,  where the coloumns correspond to the x-, y-, and z-component of the H-field, respectively.\n\nInput:\n\npositions::Vector{V} : A vector of 3D position vectors. Julia must be able to convert the type V into an SVector{3,T<:Real}. \n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.asvector","page":"API","title":"AntennaFieldRepresentations.asvector","text":"asvector(object::Union{AntennaFieldRepresentation,FieldSampling})\n\nReturn the coefficient vector of an AntennaFieldRepresentation or the measurement vector of a FieldSampling.\n\n\n\n\n\n","category":"function"},{"location":"api/#AntennaFieldRepresentations.changerepresentation","page":"API","title":"AntennaFieldRepresentations.changerepresentation","text":"changerepresentation(Tnew::Type{<:AntennaFieldRepresentation}, aut_field::AntennaFieldRepresentation)\n\nReturn an AntennaFieldRepresentation of type Tnew which represents the same antenna fields as aut_field.\n\nExamples\n\n# Calculate spherical wave expansion from dipole collection\nshifted_hdipole=HertzArray([[0.1,0.2,0.3]], [complex.([0.0, 0.0, 1.0])],[complex(1.0)], k0)\nshifted_hspherical=changerepresentation(SphericalWaveExpansion{Radiated}, shifted_hdipole)\n\n\n\n\n\n","category":"function"},{"location":"api/#AntennaFieldRepresentations.efield!","page":"API","title":"AntennaFieldRepresentations.efield!","text":"efield!(storage, aut_field::AntennaFieldRepresentation, R; reset = true)\n\nStore E-field vector (in cartesian coordinates) of the field representation aut_field at location R in preallocated storage. If reset=true, storage is overwritten. If reset=false, the field is added to storage.\n\nSee also: efield, ehfield!\n\n\n\n\n\n","category":"function"},{"location":"api/#AntennaFieldRepresentations.efield-Union{Tuple{P}, Tuple{C}, Tuple{AntennaFieldRepresentation{P, C}, Any}} where {C<:Number, P<:PropagationType}","page":"API","title":"AntennaFieldRepresentations.efield","text":"efield(aut_field::AntennaFieldRepresentation, R) -> [Ex;Ey;Ez]\n\nReturn the E-field vector (in cartesian coordinates) of the field representation aut_field at location R.\n\nSee also: efield!, ehfield\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.ehfield!-NTuple{4, Any}","page":"API","title":"AntennaFieldRepresentations.ehfield!","text":"ehfield!(storage_efield, storage_hfield, aut_field::AntennaFieldRepresentation, R; reset=true)\n\nStore E-field and H-field vector (in cartesian coordinates) of the field representation aut_field at location R in preallocated storages. If reset=true, storages are overwritten. If reset=false, the fields are added to storage_efield and storage_hfield.\n\nFor some AntennaFieldRepresentations, data can be shared between the calculations of electric and magnetic fields. Therefore, calling ehfield! may be slightly more performant than calling efield! and hfield! separately in some cases.\n\nSee also: efield!, hfield!, ehfield\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.ehfield-Union{Tuple{P}, Tuple{C}, Tuple{AntennaFieldRepresentation{P, C}, Any}} where {C<:Number, P<:PropagationType}","page":"API","title":"AntennaFieldRepresentations.ehfield","text":"ehfield(aut_field::AntennaFieldRepresentation, R) -> [Ex;Ey;Ez], [Hx;Hy;Hz]\n\nReturns the E-field and H-field vector (in cartesian coordinates) of the field representation aut_field at location R.\n\nFor some AntennaFieldRepresentations, data can be shared between the calculations of electric and magnetic fields. Therefore, calling ehfield may be slightly more performant than calling efield and hfield separately in some cases.\n\nSee also: efield, hfield, ehfield!\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.equivalentorder","page":"API","title":"AntennaFieldRepresentations.equivalentorder","text":"equivalentorder(aut_field::AntennaFieldRepresentation; ϵ= 1e-7)\n\nReturn the estimated spherical mode order L which is needed forin a spherical mode expansion to approximate the aut_field to the desired accuracy ϵ.\n\n\n\n\n\n","category":"function"},{"location":"api/#AntennaFieldRepresentations.farfield-Union{Tuple{C}, Tuple{AntennaFieldRepresentation{Radiated, C}, Tuple{Number, Real}}} where C","page":"API","title":"AntennaFieldRepresentations.farfield","text":"farfield(aut_field::AntennaFieldRepresentation{Radiated}, (θ, ϕ) ) -> Eθ, Eϕ\nfarfield(aut_field::AntennaFieldRepresentation{Radiated}, θ, ϕ ) -> Eθ, Eϕ\n\nReturn Eθ,Eϕ-far-field tuple for radiating field representation into direction specified by θ and ϕ.\n\nSee also: efield, hfield\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.getwavenumber-Tuple{AntennaFieldRepresentation}","page":"API","title":"AntennaFieldRepresentations.getwavenumber","text":"getwavenumber(aut_field::AntennaFieldRepresentation)\n\nReturns the wavenumber k=2 π / λ which is stored in the AntennaFieldRepresentation.\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.hfield!","page":"API","title":"AntennaFieldRepresentations.hfield!","text":"hfield!(storage, aut_field::AntennaFieldRepresentation, R; reset = true)\n\nStore H-field vector (in cartesian coordinates) of the field representation aut_field at location R in preallocated storage. If reset=true, storage is overwritten. If reset=false, the field is added to storage.\n\nSee also: hfield, ehfield!\n\n\n\n\n\n","category":"function"},{"location":"api/#AntennaFieldRepresentations.hfield-Union{Tuple{P}, Tuple{C}, Tuple{AntennaFieldRepresentation{P, C}, Any}} where {C<:Number, P<:PropagationType}","page":"API","title":"AntennaFieldRepresentations.hfield","text":"hfield(aut_field::AntennaFieldRepresentation, R) -> [Hx;Hy;Hz]\n\nReturn the H-field vector (in cartesian coordinates) of the field representation aut_field at location R.\n\nSee also: hfield!, ehfield\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.interpolate","page":"API","title":"AntennaFieldRepresentations.interpolate","text":"interpolate(data::Union{PlaneWaveExpansion, FieldSampling}, θϕ::Tuple{T,T}) where{T<:Real}\n\nReturns the two polarizations of spherically sampled data at the new location defined by the tuple θϕ.\n\nSee also:\n\nInterPolateMap\nLocalθLocalϕInterpolateMap\n\n\n\n\n\n","category":"function"},{"location":"api/#AntennaFieldRepresentations.inverse","page":"API","title":"AntennaFieldRepresentations.inverse","text":"inverse(opmap::OperationMap)\n\nReturn inverse linear map of opmap.\n\n\n\n\n\n","category":"function"},{"location":"api/#AntennaFieldRepresentations.j_to_sℓm-Tuple{Integer}","page":"API","title":"AntennaFieldRepresentations.j_to_sℓm","text":"j_to_sℓm(j)\n\nConvert single index j to multi-index s ℓ m in spherical wave expansion\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.rotate!","page":"API","title":"AntennaFieldRepresentations.rotate!","text":"rotate!(rotated_aut_field :: AntennaFieldRepresentation, aut_field::AntennaFieldRepresentation, χ::Number, θ::Number, ϕ::Number)\n\nIn-place rotate the field representation where the rotation is defined by the Euler angles χ, θ, ϕ.\n\nThis is equivalent to the aut_field being represented in a rotated coordinate system, where the coordinate axes of the original coordinate system must be rotated around the Euler angles -χ, -θ, -ϕ to get the rotated coordinate frame.\n\n\n\n\n\n","category":"function"},{"location":"api/#AntennaFieldRepresentations.rotate-Tuple{AntennaFieldRepresentation, Any, Any, Any}","page":"API","title":"AntennaFieldRepresentations.rotate","text":"rotate(aut_field :: AntennaFieldRepresentation, χ::Number, θ::Number, ϕ::Number) -> rotated_aut_field :: AntennaFieldRepresentation\n\nRotate the field representation where the rotation is defined by the Euler angles χ, θ, ϕ.\n\nThis is equivalent to the original representation being represented in a rotated coordinate system, where the coordinate axes of the original coordinate system must be rotated around the Euler angles -χ, -θ, -ϕ to get the rotated coordinate frame.\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.samples-Tuple{RegularθRegularϕSampling}","page":"API","title":"AntennaFieldRepresentations.samples","text":"samples(samplingstrategy::SphereSamplingStrategy) -> ( θs::Array{Float64,1}, ϕs::Array{Float64,1} )\n\nReturn sampling points θs, ϕs for the samplingstrategy.\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.setwavenumber!","page":"API","title":"AntennaFieldRepresentations.setwavenumber!","text":"setwavenumber!(aut_field::AntennaFieldRepresentation, val)\n\nSets the wavenumber k=2 π / λ which is stored in the AntennaFieldRepresentation to val.\n\n\n\n\n\n","category":"function"},{"location":"api/#AntennaFieldRepresentations.spatialshift!","page":"API","title":"AntennaFieldRepresentations.spatialshift!","text":"spatialshift!(shifted_aut_field::AntennaFieldRepresentation, aut_field::AntennaFieldRepresentation, R::AbstractVector)\n\nPreallocated shift of aut_field to new location R. \n\nThis is equivalent to the aut_field being represented in a translated coordinate system, where the coordinate axes of the original coordinate system must be translated by -R to get the translated coordinate frame.\n\n\n\n\n\n","category":"function"},{"location":"api/#AntennaFieldRepresentations.spatialshift-Tuple{AntennaFieldRepresentation, Any}","page":"API","title":"AntennaFieldRepresentations.spatialshift","text":"spatialshift(aut_field::AntennaFieldRepresentation, R::AbstractVector) -> shifted_aut_field::AntennaFieldRepresentation\n\nSpatially shift aut_field to new location R. \n\nThis is equivalent to the aut_field being represented in a translated coordinate system, where the coordinate axes of the original coordinate system must be translated by -R to get the translated coordinate frame.\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.sℓm_to_j-Tuple{Any, Any, Any}","page":"API","title":"AntennaFieldRepresentations.sℓm_to_j","text":"sℓm_to_j(s,ℓ,m)\n\nConvert multi-index s ℓ m to single index j in spherical wave expansion\n\n\n\n\n\n","category":"method"},{"location":"api/#AntennaFieldRepresentations.transmit","page":"API","title":"AntennaFieldRepresentations.transmit","text":"transmit(aut_field :: AntennaFieldRepresentation, measurement_setup :: FieldSampling{C}) -> Vector{C}\n\nReturn sampled antenna field according to the sampling defined by measurement_setup. \n\n\n\n\n\n","category":"function"},{"location":"api/#AntennaFieldRepresentations.weightsandsamples-Tuple{RegularθRegularϕSampling}","page":"API","title":"AntennaFieldRepresentations.weightsandsamples","text":"weightsandsamples(samplingstrategy::SphereSamplingStrategy) -> ( θweights::Array{Float64,1}, ϕweights::Array{Float64,1}, θs::Array{Float64,1}, ϕs::Array{Float64,1} )\n\nReturn integration weights θweights, ϕweights and sampling points θs, ϕs for the samplingstrategy.\n\n\n\n\n\n","category":"method"},{"location":"spherical/spherical_theory/#sphericalexpansion","page":"Spherical Vector Wave Expansion","title":"Spherical Vector-Wave Expansion of General Time Harmonic Electromangentic Fields","text":"","category":"section"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"Away from sources, the time harmonic electric and magnetic fields must fulfill the homogeneous curl-curl-equation ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"nabla times nabla times bmE - k_0^2 bmE =bm0 ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"Arbitrary source-free solutions of Maxwell's equations can be expanded into a series of spherical vector-wave functions as (see pp. 9ff of [1])","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmE(r vartheta varphi) =\nk_0  sqrtZ_mathrmF\nsum limits_c\nsum limits_s=1^2\nsum limits_ell=1^infty\nsum limits_m=-ell^ell\nalpha_sell m^(c)\nbmF_sell m^(c)(rvartheta varphi)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmH(r vartheta varphi) =mathrmj\ndfrack_0sqrtZ_mathrmF\nsum limits_c\nsum limits_s=1^2\nsum limits_ell=1^infty\nsum limits_m=-ell^ell\nalpha_sell m^(c)\nbmF_3-sell m^(c)(rvartheta varphi)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"where Z_mathrmFsqrtmu_0 varepsilon_0approx 376730313669 mathrmOmega is the impedance of free space and bmF_sell m^(c)(rvartheta varphi) are the spherical vector wave mode functions, which are solutions to the homogeneous curl-curl equation (except in the origin of the coordinate system, where some types of vector mode functions become singular). Due to only two of the radial dependencies being linearly independent, it is sufficient to let the sum over c to be an arbitrary pair of two iindices from the set c in 1234. Usually one will choose the pair c=1 and c=4, where only the c=4-type modes are needed to describe purely radiated fields and only the c=1-type modes are needed to describe purely incident fields.","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"The vector of coefficients completely defines the fields of a corresponding radiating or incident spherical wave expansion. ","category":"page"},{"location":"spherical/spherical_theory/#spherical_definition","page":"Spherical Vector Wave Expansion","title":"Definition of Spherical Vector-Mode Functions","text":"","category":"section"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"Explicit expressions for the spherical vector-mode functions are (see p. 13 of [2])","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmF_1ell m^(c)(rvartheta varphi)\n=\ndfracmathrme^ mathrmjmvarphisqrt2pi\nleft(\ndfracz_ell^(c)(k_0r)sqrtell(ell+1)  dfracmathrmjm overlinemathrmP_ell^m(cos vartheta) sin vartheta bme_vartheta\n-dfracz_ell^(c)(k_0r)sqrtell(ell+1)  dfracmathrmdoverlinemathrmP_ell^m(cos vartheta) mathrmd vartheta bme_varphi\nright)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmF_2ell m^(c)(rvartheta varphi)\n=\ndfracmathrme^ mathrmjmvarphisqrt2pi\nleft(\ndfracsqrtell(ell+1)k_0r z_ell^(c)(k_0r) overlinemathrmP_ell^m(cos vartheta) bme_r\nright\nphantomdfracmathrmdoverlinemathrmP_ell^m(cos vartheta) mathrmd vartheta\n\nphantombmF_2ell m^(c)(rvartheta varphi)\n=\ndfracmathrme^ mathrmjmvarphisqrt2pi\n+ dfrac1k_0r dfracmathrmdmathrmd k_0r leftk_0 r dfracz_ell^(c)(k_0r)sqrtell(ell+1) right dfracmathrmdoverlinemathrmP_ell^m(cos vartheta) mathrmd vartheta bme_vartheta\nphantom\n left\nphantombmF_2ell m^(c)(rvartheta varphi)\n=\ndfracmathrme^ mathrmjmvarphisqrt2pi\n+ dfrac1k_0r dfracmathrmdmathrmd k_0r leftk_0 r dfracz_ell^(c)(k_0r)sqrtell(ell+1) right dfracmathrmjm overlinemathrmP_ell^m(cos vartheta) sin vartheta bme_varphi\nright) ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"To ensure that the vector-mode functions bmF_sell m^(c)(rvartheta varphi) are solutions to the homogeneous curl-curl equation, they are constructed from solutions of the homogeneous scalar Helmholtz equation as (see, e.g., page 393 of [3])","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmM_ell m^(c)= nabla f_ell m^(c) times bme_r overset= bmF_1ell m^(c)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"and","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmN_ell m^(c)= dfrac1k_0 nabla times bmM_ell m^(c) overset= bmF_2ell m^(c)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"where bme_r is the unit vector in radial direction.","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"General solution to the scalar Helmholtz equation ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"Delta f +k_0^2 f=0 ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"can be constructed as superpositions of functions from the set","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"f_sell m^(c)(r vartheta varphi)\n=\nbegincases\ndfracmathrmj_ell(k_0 r)sqrtell(ell+1)\n mathrmY_ell m(vartheta varphi)  c=115em\ndfracmathrmmathrmn_ell(k_0 r)sqrtell(ell+1)\n mathrmY_ell m(vartheta varphi)  c=215em\ndfracmathrmmathrmh_ell^(1)(k_0 r)sqrtell(ell+1)\n mathrmY_ell m(vartheta varphi)  c=315em\ndfracmathrmmathrmh_ell^(2)(k_0 r)sqrtell(ell+1)\n mathrmY_ell m(vartheta varphi)  c=4\nendcases ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"where ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"mathrmj_ell(k_0 r) are spherical Bessel functions which represent the radial behavior standing waves (or incident waves)\nmathrmn_ell(k_0 r) are spherical Neumann functions which usually do not represent a physically meaningful solution\nmathrmh_ell^(1)(k_0 r) = mathrmj_ell(k_0 r) +mathrmj mathrmn_ell(k_0 r) are spherical Hankel functions of first kind which represent the radial behavior of waves coming from infinity being absorbed at the coordinate origin\nmathrmh_ell^(2)(k_0 r) = mathrmj_ell(k_0 r) -mathrmj mathrmn_ell(k_0 r) are spherical Hankel functions of second kind which represent the radial behavior of waves traveling from the coordinate origin toward infinity\nmathrmY_ell m(vartheta varphi) are the spherical Harmonics","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"and k_0=2pilambda is the wavenumber defined by the frequency of the electromagnetic wave.","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"The spherical Harmonics are defined as (see §14.30 of [1])","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"mathrmY_ell m(vartheta varphi) \n=\nbegincases\ndfrac1sqrt2pi overlinemathrmP_ell^m(cos vartheta) mathrme^ mathrmjm varphi  textfor mleq ell\n0  textesle\nendcases","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"where the normalized associated Legendre functions overlinemathrmP_ell^m(x) are defined in ordinary Legendre polynomials mathrmP_ell(x)  as (compare §14.6 and §14.7 of [1])","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"overlinemathrmP_ell^m(x)\n=\nbegincases\nsqrtdfrac(2ell+1)(ell-m)2(ell+m)\n(-1)^m\n\n(1-x^2)^m2\n dfracmathrmd^m mathrmP_ell(x)mathrmd^m  mgeq 02em\n(-1)^m  overlinemathrmP_ell^-m(x)  m0 \nendcases","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"note: Note\nDifferent sign conventions are used by different authors when the normalized associated Legendre functions are defined. Conventions may differ by a sign-factor of (-1)^m (this factor is often called Condon-Shortley phase factor). We follow the sign convention of [1], which includes the Condon-Shortley phase factor of (-1)^m in the definition of the normalized associated Legendre functions for positive m. The main reference [2] for our implementation does not include the phase factor in the definition for the associated Legendre functions, but includes an explicit (-1)^m-term to the definition of the mode functions (which we don't do), such that in the end, our definition of the final mode functions coincides with the definition used in [2].","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"warning: Warning\nA straightforward implementation of the above definition for the normalized associated Legendre functions will fail already for moderately large mode orders ell due to the involved factorials. A more sensible definition is based on recurrence relations[4]","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"","category":"page"},{"location":"spherical/spherical_theory/#spherical_orthogonality","page":"Spherical Vector Wave Expansion","title":"Orthogonality Relations of Spherical Vector-Mode Functions","text":"","category":"section"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"The tangential components of the spherical vector-mode functions are orthogonal on concentric spherical surfaces (centered at the coordinate origin). Concretely, they fulfill the orthogonality properties","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"int limits_0^2pi\nint limits_0^pi\n  bmF_sell m^(c)(rvartheta varphi) biggrvert_mathrmtan\ncdot\nbmF_sigma lambda mu^(gamma)(rvartheta varphi) biggrvert_mathrmtan\n \nsin vartheta\nmathrmdvartheta\nmathrmdvarphi\n= \ndelta_ssigma \ndelta_ell lambda \ndelta_m -mu\nR_sell^(c)(k_0r)\nR_sigmalambda^(gamma)(k_0r)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"where","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"delta_ell lambda\n=\nbegincases\n1  textif  ell= lambda \n0  textif  ellneq lambda\nendcases","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"is the Kronecker-Delta and","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"R_sell^(c)(k_0r)\n= begincases\nz_ell^(c)(k_0r)  textif  s=1 1em\ndfrac1k_0r dfracmathrmdmathrmd k_0r leftz_ell^(c)(k_0r)right  textif  s=2\nendcases","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"is a short-hand notation for the radial dependency of the corresponding spherical vector-mode function bmF_sell m^(c)(rvartheta varphi).","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"The orthogonality relations are very useful to find the coefficients alpha_sell m^(c) in the spherical vector-wave expansion of a certain field which is known on a spherical surface.","category":"page"},{"location":"spherical/spherical_theory/#spherical_farfield","page":"Spherical Vector Wave Expansion","title":"Far-Field Expressions","text":"","category":"section"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"Due to the asymptotic behavior of the radial dependencies ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"lim limits_k_0r rightarrow infty mathrmh_ell^(2)(k_0r) = mathrmj^ell+1 dfracmathrme^-mathrmj k_0rk_0r ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"lim limits_k_0r rightarrow infty  dfrac1k_0r dfracmathrmdmathrmd k_0r leftk_0 r mathrmh_ell^(2)(k_0r) right = mathrmj^ell dfracmathrme^-mathrmj k_0rk_0r ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"for distances approaching infinity, it is convenient to define far-field expressions of the mode functions as","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmK_1ell m^(4)(vartheta varphi) =\nlim limits_k_0r rightarrow infty\ndfrack_0rmathrme^-mathrmj k_0r\nbmF_1ell m^(4)(rvartheta varphi)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmK_2ell m^(4)(vartheta varphi) =\nlim limits_k_0r rightarrow infty\ndfrack_0rmathrme^-mathrmj k_0r\nbmF_2ell m^(4)(rvartheta varphi) ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"Explicit expressions for the far-field mode functions are given as","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmK_1ell m^(4)(vartheta varphi) =\ndfracmathrmj^ell+1sqrtell(ell+1)\ndfracmathrme^ mathrmjmvarphisqrt2pi\nleft(\ndfracmathrmjm overlinemathrmP_ell^m(cos vartheta )sin vartheta bme_vartheta\n-\ndfracmathrmd overlinemathrmP_ell^m(cos vartheta )mathrmd vartheta bme_varphi  \nright)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmK_2ell m^(4)(vartheta varphi) =\ndfracmathrmj^ellsqrtell(ell+1)\ndfracmathrme^ mathrmjmvarphisqrt2pi\nleft(\ndfracmathrmd overlinemathrmP_ell^m(cos vartheta )mathrmd vartheta bme_vartheta\n+\ndfracmathrmjm overlinemathrmP_ell^m(cos vartheta )sin vartheta\n bme_varphi  \nright) ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"note: Note\nThis definition of the far-field mode functions lacks the arbitrary factor of sqrt4pi which is introduced in [2] .","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"Naturally, the far field bmF(vartheta varphi) = lim limits_k_0r rightarrow infty dfracrmathrme^-mathrmj k_0r bmE(rvartheta varphi) can be calculated from a given set of expansion coefficients alpha_sell m^(4) as","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmF(vartheta varphi) =\nsqrtZ_mathrmF\nsum limits_c\nsum limits_s=1^2\nsum limits_ell=1^infty\nsum limits_m=-ell^ell\nalpha_sell m^(4)\nbmK_sell m^(c)(vartheta varphi) ","category":"page"},{"location":"spherical/spherical_theory/#Spherical-Expansion-Coefficients-from-a-Current-Density","page":"Spherical Vector Wave Expansion","title":"Spherical Expansion Coefficients from a Current Density","text":"","category":"section"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"The radiating spherical vector-wave expansion for the fields radiated by arbitrary electric and magnetic volume current densities bmJ(bmr) and bmM(bmr) can be calculated by ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"alpha_sell m^(4)=k_0 (-1)^m+1 \niiint \nleft\nsqrtZ_mathrmF bmF_sell-m^(1) cdot  bmJ(bmr)\n-\ndfracmathrmjsqrtZ_mathrmF(bmr) bmF_3-sell-m^(1)(bmr) cdot  bmM(bmr)\nright \nmathrmdv  ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"The spherical vector-wave functions bmF_sell m^(1)(bmr) of incident type which are involved in the above calculation have vanishingly small magnitudes for locations bmr with distance to the coordinate origin r  ell k_0. Thus, for current densities which are completely enclosed by a minimum sphere of radius r_mathrmminsphere, one may neglect all coefficients alpha_sell m^(4) with ell  k_0 r_mathrmminsphere (plus a small buffer depending on the desired accuracy), as long as one is not interested in evaluating the expanded electromagnetic fields extremely close to the original currents. ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"note: Note\nThe physical size of the current distribution dictates the maximum degree ell of the spherical wave expansion to accurately characterize the radiated fields.","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"","category":"page"},{"location":"spherical/spherical_theory/#spherical_coefficients_orthogonality","page":"Spherical Vector Wave Expansion","title":"Spherical Expansion Coefficients by Using Orthogonality","text":"","category":"section"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"Often, we are interested in finding the spherical vector-wave expansion of a purely incident or a purely radiated field. To be precise, one wants to find the expansion coefficients alpha_sell m^(c) (with c=1 for a purely incident field and c=4 for a purely radiated field) to fulfill the equality","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmE(r vartheta varphi) =\nk_0  sqrtZ_mathrmF\nsum limits_s=1^2\nsum limits_ell=1^infty\nsum limits_m=-ell^ell\nalpha_sell m^(c)\nbmF_sell m^(c)(rvartheta varphi)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"for a given field bmE(r vartheta varphi).","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"As indicated previously, one may leverage on the orthogonality properties of the spherical vector-wave functions to find the desired expansion coefficients alpha_sell m^(c). We have","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"alpha_sell m^(c)\n   =\n   dfrac(-1)^mk_0sqrtZ_mathrmFR_sell^(c)(k_0r)\n     R_sell^(gamma)(k_0r)\nint limits_0^2pi\nint limits_0^pi\n  bmE(rvartheta varphi) biggrvert_mathrmtan\ncdot\nbmF_s ell -m^(gamma)(rvartheta varphi) biggrvert_mathrmtan\n \nsin vartheta\nmathrmdvartheta\nmathrmdvarphi ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"The above formula for finding the spherical coefficients alpha_sell m^(c) is valid at any radial distance r from the origin. In particular, the formula can also be used to find the coefficients alpha_sell m^(c) from the radiated fields at far-field distance.","category":"page"},{"location":"spherical/spherical_theory/#spherical_incident_expansion","page":"Spherical Vector Wave Expansion","title":"Number of Relevant Modes of an Incident Electromagnetic Field","text":"","category":"section"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"In a source-free region around the coordinate origin, incident fields can be completely described in terms of vector spherical wave functions bmF_sell m^(1)(bmr) of incident type by (accordingly for the H-field)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmE(r vartheta varphi) =\nk_0  sqrtZ_mathrmF\nsum limits_s=1^2\nsum limits_ell=1^infty\nsum limits_m=-ell^ell\nalpha_sell m^(1)\nbmF_sell m^(1)(rvartheta varphi)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"The spherical vector-wave functions bmF_sell m^(1)(bmr) of incident type which are involved in the above calculation have vanishingly small magnitudes for locations bmr with distance to the coordinate origin r  ell k_0. Thus, as long as one is interested only in the fields inside a spherical region around the origin with radius r_mathrmobservation, it is sufficient to consider only modes with ell  L = k_0 r_mathrmobservation (plus a small buffer depending on the desired accuracy).  We have","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmE(r vartheta varphi)bigglvert_r ellk_0 approx\nk_0  sqrtZ_mathrmF\nsum limits_s=1^2\nsum limits_ell=1^L\nsum limits_m=-ell^ell\nalpha_sell m^(1)\nbmF_sell m^(1)(rvartheta varphi) ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"note: Note\nThe physical size of the observation region around the coordinate origin dictates the maximum degree ell of the spherical wave expansion to accurately characterize the incident fields.","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"","category":"page"},{"location":"spherical/spherical_theory/#spherical_translation","page":"Spherical Vector Wave Expansion","title":"Translation of Radiated Modes into Incident Modes in Different Coordinate System","text":"","category":"section"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"The radiated electromagnetic fields generated by currents around the coordinate origin may be represented by a superposition of spherical vector-wave functions bmF_sell m^(4)(r vartheta varphi) of radiated type. However, in a translated coordinate system (denoted by the primed coordinates r vartheta varphi), the sources are far away from the new coordinate origin and the electromagnetic fields around the new origin may be represented in terms of spherical vector-wave functions bmF_sell m^(1)(r vartheta varphi) of incident type with respect to the new coordinate origin. The geometrical situation is depicted in the figure below.","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/SphericalTranslation_dark.svg\" width=\"500\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/SphericalTranslation.svg\" width=\"500\" >\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Schematic of the geometry for the translation of radiated modes into incident modes in a different coordinate system.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"The expansion coefficients alpha_sigma lambda mu^(1) of the incident field in the new coordinate system can be calculated from the expansion coefficients alpha_sell m^(4) of the radiated field in the original coordinate system by","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"   alpha_sigma lambda mu^(1)\n   = \n   sum limits_sell m\n   mathcalT_sell m^sigma lambda mu(bmR)\n    alpha_sell m^(4)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"where the translation coefficient mathcalT_sell m^sigma lambda mu(bmR) is given by","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"mathcalT_sell m^sigma lambda mu(bmR)\n=\n-\n  sum limits_ell=0^infty\n  (-1)^sigma + lambda +mu\n  int limits_0^2pi\nint limits_0^pi\n  (-mathrmj)^ell\n  left(\n  2ell+1\n  right)\n    mathrmh_ell^(2)left(k_0lvertbmRrvertright)\n  mathrmP_ellleft(hatbmkleft(vartheta varphiright) cdothatbmRright)  \n  bmK_sell m^(4)left(vartheta varphiright)\n  cdot\n  bmK_sigma lambda- mu^(4)left(vartheta varphiright) \n   sin vartheta \n  mathrmdvartheta mathrmdvarphi ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"where hatbmkleft(vartheta varphiright) denotes the radial unit vector defined by the angles vartheta varphi and hatbmR denotes the unit vector in the direction of the vector from the original coordinate origin to the new coordinate origin.","category":"page"},{"location":"spherical/spherical_theory/#Received-Signal","page":"Spherical Vector Wave Expansion","title":"Received Signal","text":"","category":"section"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"Let hatalpha_sell m^(c) be the normalized expansion coefficients for the fields radiated by an antenna such that alpha_sell m^(c)=  ahatalpha_sell m^(c) are the actual expansion coefficients when the antenna's transmit port is excited by a signal with wave amplitude a in mathbbC  sqrtmathrmW. To determine the received signal b in mathbbC  sqrtmathrmW of this antenna in receive mode under a certain illumination of an incident field, it is convenient to represent the incident field via its spherical vector wave expansion","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"bmE(r vartheta varphi)=\nk_0  sqrtZ_mathrmF\nsum limits_s=1^2\nsum limits_ell=1^L\nsum limits_m=-ell^ell\nalpha_sell m^(1)\nbmF_sell m^(1)(rvartheta varphi) ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"In this case, the received signal is given by","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"b=\nsum limits_s=1^2\nsum limits_ell=1^L\nsum limits_m=-ell^ell\nalpha_sell m^(1)\nhatbeta_sell m ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"where the antenna receive coefficients hatbeta_sell m are found from the corresponding normalized antenna's transmit coefficients hatalpha_sell m^(c) via","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"hatbeta_sell m\n=\ndfrac(-1)^m2\nhatalpha_sell-m^(c) ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"Combining this result with the findings from the section above, we can express the S_21 parameter measured for the transmission between two antennas as","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"S_21\n=\nsum limits_sigma=1^2\nsum limits_lambda=1^L\nsum limits_mu=-lambda^lambda\nhatbeta_sigma lambda mu^textantenna2\n\nleft(\nsum limits_s=1^2\nsum limits_ell=1^L\nsum limits_m=-ell^ell\n   mathcalT_sell m^sigma lambda mu(bmR)\n    hatalpha_sell m^(4)textantenna1\nright)","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"where hatalpha_sell m^(4)textantenna1 are the normalized transmit coefficients of antenna 1 (the transmit antenna), hatbeta_sigma lambda mu^textantenna2 are the receive coefficients of antenna 2 (the receive antenna) and mathcalT_sell m^sigma lambda mu(bmR) is the translation operator known from previous sections with bmR denoting the vector separating the centers of the two antennas. The geometric situation for the calculation of the S_21-parameter is depicted below. ","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/S21Translation_dark.svg\" width=\"500\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/S21Translation.svg\" width=\"500\" >\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    The geometric situation for the calculation of the transmission between two antennas.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"","category":"page"},{"location":"spherical/spherical_theory/#References","page":"Spherical Vector Wave Expansion","title":"References","text":"","category":"section"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"[1]: F. W. J. Olver and National Institute of Standards and Technology (U.S.), eds., \"NIST Handbook of Mathematical Functions\", Cambridge ; New York: Cambridge University Press : NIST, 2010.","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"[2]: J. E. Hansen, ed., Spherical Near-Field Antenna Measurements, The Institution of Engineering and Technology, Michael Faraday House, Six Hills Way, Stevenage SG1 2AY, UK: IET, 1988.","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"[3]: J. A. Stratton, \"Electromagnetic Theory\", McGraw-Hill, 1st ed. International series in pure and applied physics, OCLC: 536704, New York, 1941.","category":"page"},{"location":"spherical/spherical_theory/","page":"Spherical Vector Wave Expansion","title":"Spherical Vector Wave Expansion","text":"[4]: T. Limpanuparb, J. Milthorpe: \"Associated Legendre Polynomials and Spherical Harmonics Computation for Chemistry Applications\", arXiv 2014.","category":"page"},{"location":"sampleddata/#spheresampling","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"","category":"section"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"In AntennaFieldRepresentations.jl, several data structures represent functions bmf(vartheta varphi) which are sampled on a sphere at certain sampling points (vartheta_i varphi_i). Examples for spherically sampled data structures are PlaneWaveExpansions or SphericalFieldSamplings. ","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"A natural choice for the sampling points (vartheta_i varphi_i) is to choose a tensor product of 1D samplings along vartheta and varphi, resepectively, i.e., by defining N_vartheta sampling points vartheta_m along vartheta and N_varphi sampling points varphi_n along varphi, we end up with N_vartheta times N_varphi pairs (vartheta_m varphi_n) which define the sampling points on the sphere.","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"Internally, the data can be stored in a matrix[1], where the mth row corresponds the angle vartheta_m and the nth coloumn corresponds to the angle varphi_n. The m n- entry of the matrix therefore corresponds to the function value bmf(vartheta_m varphi_n).","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"Different choices for the distribution of sampling locations may have application specific benefits or drawbacks. To enable the users to use the most suitable choice for their problem at hand, several different sampling distributions are implemented in AntennaFieldRepresentations.jl. The values of the sampling angles are defined by a SphereSamplingStrategy object. ","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"Each spherically sampled data structure contains a SphereSamplingStrategy object such that we know which sampling locations (vartheta_m varphi_n) correspond to the matrix entries.","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"The following SphereSamplingStrategys are implemented in AntennaFieldRepresentations.jl:","category":"page"},{"location":"sampleddata/#regularspheresampling","page":"Spherically Sampled Data Structures","title":"RegularθRegularϕSampling","text":"","category":"section"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"Objects with a RegularθRegularϕSampling are sampled along varphi with N_varphi equally distributed samples  in 0leq varphi  2pi and along vartheta with N_vartheta equally distributed samples  in 0leq varphi leq pi.","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"We have ","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"vartheta_m = (m-1) Deltavartheta with m=1ldotsN_vartheta \nvarphi_n = (n-1) Deltavarphi with n=1ldotsN_varphi","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"The sampling steps Deltavartheta = 2pi  J_vartheta and Deltavarphi = 2pi  J_varphi must be whole-number fractions of 2pi to guarantee that the sampling step between the two samples at the end of a varphi-ring or a vartheta ring is the same as everywhere else. This is enforced during the construction of a RegularθRegularϕSampling as the whole-number divisors J_vartheta and J_varphi are the input arguments for the constructor.","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"To generate a RegularθRegularϕSampling struct, use the following constructor","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"RegularθRegularϕSampling(Jθ::Integer, Jϕ::Integer)","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"note: Note\nYou can define a RegularθRegularϕSampling with N_vartheta samples along vartheta by either specifying J_vartheta = 2 N_vartheta or J_vartheta = 2 N_vartheta + 1. The difference is that Delta vartheta is different for the two choices, such that the last vartheta-sample will either coincide with vartheta_N_vartheta = pi or with vartheta_N_vartheta = pi - Delta vartheta 2.   ","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"note: Note\nA RegularθRegularϕSampling has always multiple samples at the North Pole (one sample per varphi-value). However, only RegularθRegularϕSamplings with even values for J_vartheta also feature samples at the South Pole. Odd values for J_vartheta lead to no samples at the South Pole.","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"While local and even global interpolation is easy and efficient with a RegularθRegularϕSampling, the drawback is that evaluating spherical integrals is more costly as compared to a GaussLegendreθRegularϕSampling.","category":"page"},{"location":"sampleddata/#gausslegendresampling","page":"Spherically Sampled Data Structures","title":"GaussLegendreθRegularϕSampling","text":"","category":"section"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"Objects with a GaussLegendreθRegularϕSampling are sampled along varphi with N_varphi equally distributed samples  in 0leq varphi  2pi and N_vartheta vartheta-samples on a Gauß-Legendre based grid with 0 vartheta  pi, according to","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"vartheta_k=textarccos(-x_k)","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"where x_k are the roots of the N_varthetath Legendre polynomial","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"varphi_n = (n-1) Deltavarphi with n=1ldotsN_varphi","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"The sampling choice naturally leads to an accurate integration rule over the complete Ewald sphere ","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"oiint f(hatbmk)  mathrmd^2 hatbmk \n= \nint limits_0^2pi int limits_0^pi  f(vartheta varphi)  sinvartheta mathrmdvartheta\nmathrmd varphi \napprox \nsum limits_i=1^N_varphi sum limits_k=1^N_vartheta dfrac2piN_varphi\nw_k f(vartheta_k varphi_i)","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"where w_k are the Gauß-Legendre quadrature weights. The calculation of the Gauß-Legendre quadrature weights w_k and quadrature nodes x_k is efficiently implemented (to compute the N_vartheta-point Gauß quadrature nodes and weights to 16-digit accuracy takes mathcalO(N_vartheta) time [2]) in the Julia package FastGaussQuadrature.jl.","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"To generate a GaussLegendreθRegularϕSampling struct, use the following constructor","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"GaussLegendreθRegularϕSampling(Nθ::Integer, Nϕ::Integer)","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"where Nθ corresponds to the stored number of samples in vartheta-direction and Nϕ corresponds to the number of samples in varphi direction.","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"The two different SphereSamplingStrategys are illustrated below for reference.","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/compare_sampling_darkmode.svg\" width=\"750\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/compare_sampling_darkmode.svg\" width=\"750\" >\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Illustration of different SphereSamplingStrategys. Grid points are marked by orange dots and the blue lines correspond to a RegularθRegularϕSampling for reference.  <br/>  <br/>  \n    Left: RegularθRegularϕSampling with Jϕ = Jθ = 16, Right: GaussLegendreθRegularϕSampling with Nϕ = 16 and Nθ=8. \n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"[1]: or multiple matrices, if the function bmf(vartheta varphi) is a vector function containing e.g., data for two polarizations","category":"page"},{"location":"sampleddata/","page":"Spherically Sampled Data Structures","title":"Spherically Sampled Data Structures","text":"[2]: I. Bogaert, Iteration-free computation of Gauss–Legendre quadrature nodes and weights, SIAM J.ournal on Scientific Computing, Vol. 36, No. 3, pp. A1008–A1026, 2014 DOI. 10.1137/140954969","category":"page"},{"location":"operations/conversions/#Conversions-Between-Field-Representations","page":"Conversion into Other Field Representations","title":"Conversions Between Field Representations","text":"","category":"section"},{"location":"operations/conversions/","page":"Conversion into Other Field Representations","title":"Conversion into Other Field Representations","text":"todo: Todo\nComing soon ...","category":"page"},{"location":"operations/conversions/","page":"Conversion into Other Field Representations","title":"Conversion into Other Field Representations","text":"","category":"page"},{"location":"operations/interpolation_theory/#interpolation_theory","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"","category":"section"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"Consider a function f(vartheta varphi) defined on the surface of a sphere, which is sampled at a discrete set of sampling points (vartheta_m varphi_n) with 0leq vartheta_m leq pi, 0 leq varphi_n  2pi, m=1ldots N_vartheta, n=1ldots N_varphi. The sampling points are illustrated below.","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/sampling_regular_interp_darkmode.svg\" width=\"200\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/sampling_regular_interp_darkmode.svg\" width=\"200\" >\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Illustration of the sampling points for the sampled function on the sphere. \n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"In many circumstances, we need to evaluate the function f(vartheta varphi) at angles (vartheta varphi) which do not coincide with any of the stored data points f(vartheta_m varphi_n). In this case, we must perform an interpolation of the data to the desired location.  As long as the data is sampled on closed rings with constant vartheta or constant varphi [1] , respectively, one can perform the interpolation as a sequence of 1D interpolations along vartheta and varphi. Two closed rings with constant vartheta or constant varphi are illustrated below.","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/sampling_regular_interp_darkmod_highlighted.svg\" width=\"200\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/sampling_regular_interp_darkmod_highlighted.svg\" width=\"200\" >\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Illustration of sampled data on closed rings with constant Theta (green) or constant Phi (red). \n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"In the following, we will only outline the 1D interpolation procedures for 2pi-periodic functions. We will distinguish between global interpolation, i.e., an interpolation scheme which uses all available data points along a closed ring (i.e., a ring with either a fixed vartheta-coordinate or a fixed varphi-coordinate), and local interpolation, i.e. an interpolation scheme which utlizes only a few sampling points in the neighbourhood of the desired function input.","category":"page"},{"location":"operations/interpolation_theory/#Global-Interpolation","page":"Interpolation of Spherically Sampled Data","title":"Global Interpolation","text":"","category":"section"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"Global interpolation leverages on the fact that any band limited 2pi-periodic function f(vartheta) may be expressed via","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"f(vartheta)\n=\nsum\nlimits_k=-B^B\nc_k  mathrme^mathrmj k theta ","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"If we have at least J_vartheta = 2B+1 sampling points on the ring, we can, in principle, reconstruct all coefficients c_k. From the reconstructed coefficients c_k one could calculate the function f(vartheta) at any arbitrary angle vartheta using the equation above.","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"If the J_vartheta input sampling points are equidistantly spaced, we can use an FFT to calculate the coefficients c_k with mathcalO(J_vartheta log J_vartheta) computational complexity. The calculation of the new function value from the coefficients c_k requires an additional mathcalO(J_vartheta) operations, such that the overall interpolation process is completely governed by the computional cost of the FFT.","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"note: Note\nThe computational complexity of the interpolation of equidistantly sampled periodic data is mathcalO(J_vartheta log J_vartheta) because it is determined by the cost of an FFT. ","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"If we further want to interpolate the function f(vartheta) at J_vartheta equidistantly spaced new points, we can fill zeros into the array containing the coefficients c_k such thath the length of the array matches the desired number of sampling points. All of the new function values can be obtained at once from the zero-padded vector of coefficients c_k with a single IFFT, such that the resulting sampling points  can be computed in mathcalO(J_vartheta log J_vartheta) computational complexity.","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"note: Note\nIf we want to interpolate the function f(vartheta) at J_vartheta equidistantly spaced new points from sampled data at  J_vartheta equidistantly spaced old sample points f(vartheta_n), the computational cost is mathcalO(J_vartheta log J_vartheta) + mathcalO(J_vartheta log J_vartheta) ","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"However, depending on the SphereSamplingStrategy, the sampling points may or may not be equidistantly spaced. For Non-equidistantly spaced sampling grids, we can use the Barycentric Trigonometric Interpolation formula[2]","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"f(vartheta) = \ndfracsum limits_k=1^J_vartheta dfracw_ksinleft(frac12 (vartheta -vartheta_k) right) f(vartheta_k)sum limits_k=1^J_vartheta dfracw_ksinleft(frac12 (vartheta -vartheta_k )right) ","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"where ","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"w_k= \ndfrac1prod limits_ineq k sinleft(frac12 (vartheta_k -vartheta_i )right)\n  i =1 ldots N_vartheta","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"This interpolation formula is also valid for non-equidistantly spaced sampling points vartheta_k. ","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"warning: Warning\nThis interpolation formula is only valid for odd J_vartheta. If we have an even number of irregularly spaced sampling points J_vartheta, it is recommended to discard one of the sampling points.","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"note: Note\nNote that the barycentric trigonometrc interpolation formula takes the form f(vartheta) = sum_k=1^J_vartheta alpha_k f(vartheta_k). With predefined interpolation weights alpha_k the computational cost of evaluating the global interpolation is mathcalO(J_vartheta), i.e., the computational cost depends on the size of the input data.","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"note: Note\nIf we want to interpolate the function f(vartheta) at J_vartheta new points, we need to evaluate the barycentric trigonometrc interpolation formula J_vartheta times, leading to a computational cost of mathcalO(J_vartheta J_vartheta). ","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"For bandlimited functions f(vartheta), global interpolation should be exact (neglecting rounding errors).","category":"page"},{"location":"operations/interpolation_theory/#Local-Interpolation","page":"Interpolation of Spherically Sampled Data","title":"Local Interpolation","text":"","category":"section"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"In certain situations, it is not feasible to have the computational cost of the interpolation to be dependent on the size of the input data. In these cases, we rely on local (polynomial) interpolation [3] [4]. ","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"While global polynomial interpolation fits a polynomial to the entire data on the ring (thus, taking into account all available data points), local interpolation fits a specified order polynomial (fourth order, fifth order, sixth order, ... etc.) using only points in the adjacient neighbourhood of the desired function input vartheta_mathrmnew. For example, a sixth-order local interpolation would fit a sixth order polynomial through the three sample points before and after vartheta_mathrmnew. In general, a K-order local polynomial will utilize the adjacient K data points to interpolate the function f(vartheta) at the new input vartheta. The situation is illustrated below.","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"<figure>\n<picture>\n  <source media=\"(prefers-color-scheme: dark)\" srcset=\"../assets/local_interp_1Dcircle.svg\" width=\"300\">\n  <source media=\"(prefers-color-scheme: light)\" srcset=\"../assets/local_interp_1Dcircle.svg\" width=\"300\" >\n  <img alt=\"\" src=\"\" width=\"300\">\n</picture>\n\n  <figcaption>\n    To interpolate the function at the green location, from all available data points (faint orange) only the highlighted sample points (solid red) are utilized for the interpolating polynomial.\n  </figcaption>\n</figure>\n<br/","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"We have [4]","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"f(vartheta) approx\ndfracsum limits_k=1^K dfracw_kvartheta - vartheta_k f(vartheta_k)sum limits_k=1^K dfracw_kvartheta - theta_k","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"where vartheta_k are the K old sampling points in the neighbourhood of vartheta and","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"w_k= \ndfrac1prod limits_ineq k  (vartheta_k -vartheta_i )\n  i =1 ldots K","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"This interpolation formula is also valid for equidistantly and non-equidistantly spaced sampling points vartheta_k.","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"note: Note\nNote that the local interpolation formula takes the form f(vartheta) = sum_k=1^K alpha_k f(vartheta_k). With predefined interpolation weights alpha_k the computational cost of evaluating the global interpolation is mathcalO(K), i.e., the computational cost does not dependd on the size of the input data.","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"note: Note\nIf we want to interpolate the function f(vartheta) at J_vartheta new points, we need to evaluate the local interpolation formula J_vartheta times, leading to a computational cost of mathcalO(K J_vartheta). ","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"Although local interpolation is not exact for bandlimited functions f(vartheta), the approximation error can be controlled by ","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"oversampling of the original data (i.e., the data is originally stored with more samplng points than required by the Nyquist critereon for recovery of the underlying bandlimited function)\nincreasing the degree of the interpolating polynomial","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"[1]: For an equidistant sampling along the varphi-direction, this requires an even number of varphi-samples N_varphi such that the vartheta-rings can be interpolated over the poles.","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"[2]: Berrut, Jean -Paul. \"Baryzentrische Formeln zur trigonometrischen Interpolation (I).\" Zeitschrift für angewandte Mathematik und Physik ZAMP 35 (1984): 91-105 DOI. 10.1007/BF00945179","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"[3]: Trefethen, L. \"Six myths of polynomial interpolation and quadrature.\" (2011). University of Oxford","category":"page"},{"location":"operations/interpolation_theory/","page":"Interpolation of Spherically Sampled Data","title":"Interpolation of Spherically Sampled Data","text":"[4]: Berrut, Jean-Paul, and Lloyd N. Trefethen. \"Barycentric lagrange interpolation.\" SIAM review 46.3 (2004): 501-517. DOI. 10.1137/S003614450241771","category":"page"},{"location":"mlfmm/mlfmm_theory/#Fast-Computation-of-Field-Interactions-with-the-Multilevel-Fast-Multipole-Method","page":"Multilevel Fast Multipole Method","title":"Fast Computation of Field Interactions with the Multilevel Fast Multipole Method","text":"","category":"section"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"In usual measurement scenarios, the probe antennas are much smaller than the antenna under test. The geometry of an exemplary measurement scenario is depicted below.","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"<figure>\n<picture>\n  <source  srcset=\"../assets/mlfmm_scenario.png\" width=\"800\">\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Geometrical situation in a typical antenna measurement scenario.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"The Multilevel Fast Multipole Method can be used to accelerate the calculation of the transmission between a large antenna under test and many probe antennas at different measurement positions.  The algorithm for the computation of the antenna interactions is based on the plane-wave representation of the S_21 parameter between two antennas","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"S_21=\nint limits_0^2pi\nint limits_0^pi\nhatbmF_1left(hatbmk right)cdot\nT_L(k_0 lvert bmR rvert hatbmk cdot hatbmR)\nhatbmF_2left(- hatbmk right)\n sin vartheta\nmathrmdvartheta mathrmdvarphi ","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"where hatbmF_1left(hatbmk right) is the normalized far-field pattern of the transmitting antenna 1, hatbmF_2left(- hatbmk right) is the inverted far-field pattern of the receiving antenna 2, and","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"T_L(k_0 lvert bmR rvert hatbmk cdot hatbmR)\n=\n-sum limits_ell =0^Lleft(-mathrmjright)^ell \nleft(2ell+1right)  \nmathrmh_ell^(2)(k_0 lvert bmR rvert)\nmathrmP_ell(hatbmk cdot hatbmR)","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"is the plane-wave translation operator.","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"The algorithm for the fast computation of many S_21-parameters in the described configuration has three stages.","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"In the aggregation stage, by using interpolation and phase shifts, the far-field pattern of the antenna under test is computed by combining the far-field patterns of many smaller subsets of the antenna.","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"The far-field pattern of the antenna under test is thereafter translated into a plane wave spectrum which can represent the incident fields for many probe positions simultaneously in a well-defined observation region.","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"Finally in the disaggregation step, the sampling rate of the k-space representation of the far-field patterns of the antenna under test and the probe antennas is reduced in an anterpolation step before the integrals are evaluated at the low sampling density efficiently. Without the anterpolation step, all integrals would have to be evaluated with a huge sampling rate in the k-space.","category":"page"},{"location":"mlfmm/mlfmm_theory/#mlfmm_aggregation","page":"Multilevel Fast Multipole Method","title":"Aggregation of Far-Field Patterns","text":"","category":"section"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"One of the key points for the performance of the algorithm is the fact that the far-field pattern of a large antenna can be composed from the individual far-field patterns of disjunct subsets of its equivalent current representations. The geometric situation of this so-called aggregation step is depicted in the figure below.","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"<figure>\n<picture>\n  <source  srcset=\"../assets/aggregate.png\" width=\"500\">\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Schematic representation of the aggregation step. The far-field pattern of the complete antenna under test (denoted by the large orange sphere) is composed of far-field patterns of subsets of the current densety (denoted by the smaller red spheres).\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"The subsets of the currents  each have a signifcantly smaller geometrical size than the current distribution for the complete antenna under test. Therefore, fewer plane-wave samples are sufficient to represent their individual far-field patterns. As a consequence, the computation of the (less densely sampled) far-field patterns from the subset currents is more efficient than the calculation of the (more densely sampled) far field pattern of the complete antenna under test.","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"The less densely sampled far-field patterns of the subset currents is interpolated to match the sampling density which is necessary to represent the complete far-field pattern of the antenna under test as indicated in the figure below.","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"<figure>\n<picture>\n  <source  srcset=\"../assets/interpolate.png\" width=\"500\">\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Schematic representation of the interpolation step.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"The plane-wave samples of the densely sampled far-field patterns are then phase-shifted as hatbmF(hatbmk) rightarrow hatbmF(hatbmk)  mathrme^ mathrmj bmkcdot bmR such that they are defined with respect to the same expansion center. ","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"<figure>\n<picture>\n  <source  srcset=\"../assets/phaseshift.png\" width=\"500\">\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Schematic representation of the phase-shifting step.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"Finally, all interpolated and phase-shifted far-field patterns of the subset currents can be added together to form the far-field pattern of the complete antenna under test.","category":"page"},{"location":"mlfmm/mlfmm_theory/#Interpolation-of-Far-Field-Patterns","page":"Multilevel Fast Multipole Method","title":"Interpolation of Far-Field Patterns","text":"","category":"section"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"Depending on the sampling strategy of the far-field patterns, the plane-wave samples of the densely sampled far-field pattern can be found from the plane-wave samples of the less densely sampled far-field pattern by subsequent 1D-interpolations along the vartheta- and varphi-component, respectively.  Suitable techniques for 1D-interpolation are the trigonometric interpolation[1] and piecewise polynomial interpolation[2] [3].","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"Trigonometric interpolation is particularly useful for equidistantly sampled periodic data, where the Fast Fourier Transform can accelerate the interpolation process. In this case, trigonometric interpolation is an exact interpolation technique (in exact arithmetic) with a computational complexity of mathcalO(n log n) to interpolate n points in a 1D periodic data set.  ","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"If computational complexity is crucial, piecewise polynomial interpolation comes into play. A (low-order) polynomial is fitted into a small subset of sampling points around the point we wish to interpolate. The piecewise polynomial interpolation is not exact, opposed to the trigonometric interpolation, but the error can be controlled by the order of the polynomial fit and/or the distance between the sampling points. The computational complexity of the piecewise polynomial interpolation is mathcalO(Kn) to interpolate n points in a 1D data set, where K is the fixed order of the polynomial fit. Notice that the order of the polynomial does not depend on the overall length of the data set. Furthermore, the sampling is not required to be neither equidistantly spaced nor periodic (although the Runge phenomenon may obstruct accurate interpolation near the end points of the sampling for most sampling strategies [3]). ","category":"page"},{"location":"mlfmm/mlfmm_theory/#Translation-of-the-Antenna-Under-Test-Far-Field-Pattern-into-a-Plane-Wave-Spectrum-in-Observation-Region","page":"Multilevel Fast Multipole Method","title":"Translation of the Antenna Under Test Far-Field Pattern into a Plane Wave Spectrum in Observation Region","text":"","category":"section"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"After the far-field pattern of the antenna under test has been determined, we can calculate an incident plane wave spectrum for the observation region by applying the translation operator. Ideally, the observation region is large and includes many probe antenna positions at once. In this case, the obtained incident plane wave spectrum is valid for calculating the received signals of all the probes within the observation region.","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"The valid region for the incident plane-wave representation is ultimately dictated by the contained number of spherical modes. With mire spherical modes in the field representation, the fields of the incident plane-wave spectrum can be correctly evaluated in a larger observation region. The drawback is that this will also neccesitate an increase  of the effective number of spherical modes contained in the antenna far-field pattern before the translation. Due to numerical instabilities of the higher-order spherical modes near the origin, we must also be further away from the antenna to evaluate the fields accurately in this case. ","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"As a rule of thumb, the center points of the antenna under test region and the observation region must be separated by at least 2 ell_mathrmmax  k_0 when ell_mathrmmax is the maximum effective mode order for the ell-index of the spherical mode content in either of the field representations. For an accurate evaluation of the desired S_21-integral","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"S_21=\nint limits_0^2pi\nint limits_0^pi\nhatbmF_1left(hatbmk right)cdot\nT_L(k_0 lvert bmR rvert hatbmk cdot hatbmR)\nhatbmF_2left(- hatbmk right)\n sin vartheta\nmathrmdvartheta mathrmdvarphi ","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"the summation in the translation operator must be carried out for all terms up to L=2 ell_mathrmmax and the far-field patterns hatbmF_1left(hatbmk right) and  hatbmF_2left(- hatbmk right) should be sampled such that spherical mode orders up to ell=2 ell_mathrmmax can be resolved.","category":"page"},{"location":"mlfmm/mlfmm_theory/#Disaggregation-of-Plane-Wave-Spectra","page":"Multilevel Fast Multipole Method","title":"Disaggregation of Plane-Wave Spectra","text":"","category":"section"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"Consider the situation after the translation step as depicted in the figure below.","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"<figure>\n<picture>\n  <source  srcset=\"../assets/anterpolate.png\" width=\"500\">\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Situation after the translation step.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"The antenna under test field is represented by an incident plane-wave spectrum hatbmP_mathrmincleft(hatbmk right) = hatbmF_1left(hatbmk right)T_L(k_0 lvert bmR rvert hatbmk cdot hatbmR) in the observation region around the expansion center bmr_0 (denoted by the large green sphere). The probe antenna's far-field pattern is known with an expansion center at bmr_m. Furthermore, since the probe antenna is small, its far-field pattern has a low-order spherical mode content (thus the representation by a small blue sphere). To evaluate the interaction integral, we need to shift the probe pattern to the incident plane-wave expansion center bmr_0 and ensure that its k-space representation has the same sampling as the incident plane-wave spectrum hatbmP_mathrmincleft(hatbmk right).","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"We have","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"S_21=\nint limits_0^2pi\nint limits_0^pi\nhatbmP_mathrmincleft(hatbmk right) \ncdot\nmathrme^mathrmjbmk cdot (bmr_0-bmr_m)\nmathrminterpolateleft\nhatbmF_2left(- hatbmk right)\nright\n sin vartheta\nmathrmdvartheta mathrmdvarphi ","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"where we bring the probe far-field pattern to the correct sampling density by the interpolation mathrminterpolatelefthatbmF_2left(- hatbmk right)right before we phase-shift each far-field component by mathrme^mathrmjbmk cdot (bmr_0-bmr_m) to correspond to the correct expansion center at bmr_0.","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"Let textanterpolatecdot be the adjoint operation to the textinterpolatecdot operation. Then we have","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"S_21=\nint limits_0^2pi\nint limits_0^pi\nmathrmanterpolateleft\nhatbmP_mathrmincleft(hatbmk right)\n\nmathrme^mathrmjbmk cdot (bmr_0-bmr_m)\nright \ncdot\nhatbmF_2left(- hatbmk right)\n sin vartheta\nmathrmdvartheta mathrmdvarphi ","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"i.e., the anterpolation operation applied to the (phase-shifted) incident plane-wave spectrum. If the interpolation algorithm can be represented by a matrix multiplication, the anterpolation algorithm is simply a multiplication by the Hermitian adjoint of the interpolation matrix. The result of the anterpolation operation is a plane-wave spectrum centered at the probe position bmr_m matching the low sampling density of the original probe far-field pattern. In fact, the anterpolation step can be regarded as downsampling of the incident plane-wave spectrum with an inherent spherical-mode low-pass filter to avoid aliasing. Due to the neccesary spherical mode-filter, we cannot simply down-sample the incident plane-wave spectrum to match the probe sampling, but we must carefully implement the adjoint operator to our interpolation algorithm.","category":"page"},{"location":"mlfmm/mlfmm_theory/#mlfmm_refs","page":"Multilevel Fast Multipole Method","title":"References","text":"","category":"section"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"[1]: Wikipedia: Trigonometric interpolation","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"[2]: Wikipedia: Polynomial interpolation","category":"page"},{"location":"mlfmm/mlfmm_theory/","page":"Multilevel Fast Multipole Method","title":"Multilevel Fast Multipole Method","text":"[3]: J.-P. Berrut, L. N. Trefethen \"Barycentric Lagrange Interpolation\", SIAM Review, Vol. 46, No. 3, pp. 501-517, 2004 DOI. 10.1137/S0036144502417715","category":"page"},{"location":"surfacecurrents/surface_theory/#Huygens","page":"Equivalent Surface Currents","title":"Huygens Principle and Equivalent Electromagnetic Surface Currents","text":"","category":"section"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"The electromagnetic surface equivalence principle, sometimes called Huygens principle, states that the fields bmE(bmr), bmH(bmr) radiated from sources in a volume V can be alternatively represented by equivalent electric and magnetic surface currents bmJ_mathrmeq(bmr) and bmM_mathrmeq(bmr) on a closed surface mathcalS (with outward pointing normal vector bmn) enclosing V ","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"The corresponding fields fields can be calculated at any point bmr outside of mathcalS from the equivalent surface currents via ","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"bmE(bmr)=\niint limits_mathcalS\nleft\nbmmathcalG_JE\n(bmrbmr)\ncdot\nbmJ_mathrmeq(bmr)\n+\nbmmathcalG_ME\n(bmrbmr)\ncdot\nbmM_mathrmeq(bmr)\nright mathrmda ","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"and","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"bmH(bmr)=\niint limits_mathcalS\nleft\nbmmathcalG_JH\n(bmrbmr)\ncdot\nbmJ_mathrmeq(bmr)\n+\nbmmathcalG_MH\n(bmrbmr)\ncdot\nbmM_mathrmeq(bmr)\nright mathrmda ","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"using the dyadic Green's functions ","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"bmmathcalG_JE=\n-mathrmj k_0 Z_mathrmF\nleft\nleft(mathbfI +dfrac1k^2 nabla nablaright) g_0(bmrbmr)\nright","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"bmmathcalG_ME=\n-nabla g_0(bmrbmr) times mathbfI","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"bmmathcalG_JH=\nnabla g_0(bmrbmr) times mathbfI","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"and","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"bmmathcalG_MH=\n-mathrmj dfrack_0Z_mathrmF\nleft\nleft(mathbfI +dfrac1k^2 nabla nablaright) g_0(bmrbmr)\nright","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"which are derived from the scalar greens function","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":" g_0(bmrbmr)\n=\ndfracmathrme^-mathrmjk_0 bmr-bmr4pi bmr-bmr ","category":"page"},{"location":"surfacecurrents/surface_theory/#rwgbasis","page":"Equivalent Surface Currents","title":"Rao-Wilton-Glisson Basis Functions","text":"","category":"section"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"In a numeric implementation, the surface mathcalS can be, e.g., approximated by triangles. On these triangles, we can define a set of basis functions bmbeta_n(bmr) such that the equivalent electric surface current density [1] bmJ_mathrmeq(bmr) on the triangulated surface can be expressed as a linear superposition","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"bmJ_mathrmeq(bmr) = sum limits_n=1^N\nj_n bmbeta_n(bmr)","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"with some coefficients j_n in mathbbC  mathrmAmathrmm.","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"A very common choice of basis functions on a triangulated surface are the so-called Rao-Wilton-Glisson (RWG) basis functions [2]. RWG basis functions are sometimes called Raviart-Thomas basis functions. They are defined on each pair of adjacient triangles which share a common edge. The current density for an RWG-basis function crosses the common edge and at each point bmr inside one of the two triangles, the current density points away from or towards the vertex of the triangle which is not part of the common edge (the vertex is denoted by bmr_mathrmop- or bmr_mathrmop+ depending of whether the current density points away from or towards this vertex).","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"Formally, the surface current density of the nth RWG-basis function is given by","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"bmbeta_n(bmr)\n=pm\ndfracbmr_mathrmoppm -bmr2A_Delta ","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"where A_Delta denotes the surface area of the triangle in which bmr is located. A schematic representation of an RWG function is depicted below.","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"[1]: The same procedure also works for the magnetic surface current denisity.","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"[2]: Rao, Sadasiva, Donald Wilton, and Allen Glisson. \"Electromagnetic scattering by surfaces of arbitrary shape.\" IEEE Transactions on antennas and propagation 30.3 (1982): 409-418. doi: 10.1109/TAP.1982.1142818","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"<figure>\n<picture>\n  <source  srcset=\"../assets/RWG.png\" width=\"200\">\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Schematic representation of Rao-Wilton Glisson function.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"The total surface current density is created by superimposing weighted RWG-basis functions for each triangle pair, such that a current density is defined at each point on the triangulated surface as in the figure below.","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"<figure>\n<picture>\n  <source  srcset=\"../assets/SurfacePlot.png\" width=\"600\">\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Electric surface currents represented by Rao-Wilton-Glisson functions on spherical surface.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"With the known surface current density on the complete triangulated surface, we can use numeric integration techniques to (approximately) evaluate the integrals for calculating the electic and magnetic fields.","category":"page"},{"location":"surfacecurrents/surface_theory/#Non-Uniqueness-of-Equivalent-Surface-Current-Representations","page":"Equivalent Surface Currents","title":"Non-Uniqueness of Equivalent Surface Current Representations","text":"","category":"section"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"The representation of antenna fields by equivalent surface current densities is ambiguous in the sense that various different surface currents can generate exactly the same or approximately the same fields (in the volum outside of the original source volume). ","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"The linearity of Maxwell's equations implies the existence of non-radiating currents or weakly radiating surface currents [3] in this case. If two different surface current distributions generate the same field, their difference (i.e., a certain other current distribution) must result in a zero exterior field.","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"note: Note\nNon-radiating surface currents can be added to any surface current density without affecting the exterior fields.","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"[3]: By weakly radiating currents, we understand a surface current density which does not contribute significantly to the radiated far-fields despite the magnitude of the currents being in the same order of magnitude to other currents which do contribute to the far field pattern.","category":"page"},{"location":"surfacecurrents/surface_theory/#Non-Radiating-Currents","page":"Equivalent Surface Currents","title":"Non-Radiating Currents","text":"","category":"section"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"Non-radiating surface currents have zero exterior fields but non-zero interior fields.  More technically, let V be the interior (original source-) volume and partial V its boundary with an outward pointing unit normal vector bmn.","category":"page"},{"location":"surfacecurrents/surface_theory/","page":"Equivalent Surface Currents","title":"Equivalent Surface Currents","text":"todo: Todo\nComplete section about surface equivalence principle and non-radiating, weakly radiating and Love currents","category":"page"},{"location":"surfacecurrents/surface_theory/#Weakly-Radiating-Currents","page":"Equivalent Surface Currents","title":"Weakly Radiating Currents","text":"","category":"section"},{"location":"surfacecurrents/surface_theory/#Love-Currents","page":"Equivalent Surface Currents","title":"Love Currents","text":"","category":"section"},{"location":"examples/#Examples","page":"Examples","title":"Examples","text":"","category":"section"},{"location":"examples/","page":"Examples","title":"Examples","text":"warning: Warning\nThis chapter refers to an old state of the package and needs rewriting!! ","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"","category":"page"},{"location":"examples/#Convert-Radiated-Fields-of-Fitzgerald-Dipoles-Into-Other-Representations","page":"Examples","title":"Convert Radiated Fields of Fitzgerald Dipoles Into Other Representations","text":"","category":"section"},{"location":"examples/","page":"Examples","title":"Examples","text":"First, let us investigate the spherical mode expansion of fields which are radiated by a collection of Fitzgerald dipoles. ","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"AntennaFieldRepresentations is used to convert the dipole representation into a radiating spherical vector wave expansion.  TODO: add example","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"The order of the mode expansion (i.e., th number of considered spherical mode coefficients to represent the radiated fields) is based on the largest separation of any dipole to the coordinate origin. The default value is chosen very conservatively, leading to many close-to-zero coefficients as can be seen by visualizing the corresponding spherical mode expansion by TODO: add example","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"<figure>\n<picture>\n  <source  srcset=\"../assets/sphModes.svg\" width=\"800\">\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Mode spectrum for the radiated field of the collection of Fitzgerald dipoles.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"A larger expansion order (i.e., the maximum occuring mode order ℓ) usually leads to more accurate representations at the cost of additional storage and computation requirements. The expansion order can be passed as an additional argument to the convertrepresentation function. In the following example, the expansion order is limited to an expansion order of ℓ≤24. TODO: add example","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"<figure>\n<picture>\n  <source  srcset=\"../assets/sphModes_reduced.svg\" width=\"800\">\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Reduced mode spectrum for the radiated field of the collection of Fitzgerald dipoles.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"Next, we can calculate the radiated far fields and store the far-field pattern in a FarFieldPattern. TODO: add example","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"For a higher resolution, the mode order for the far-field representation can be increased. TODO: add example","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"<figure>\n<picture>\n  <source  srcset=\"../assets/ff_dipoles_highres.png\" width=\"800\">\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Far-field pattern of the collection of Fitzgerald dipoles.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"When the far-field pattern is computed from a spherical wave expansion, the mode order for the far-field representation is chosen identical to the mode order of the spherical wave expansion. TODO: add example","category":"page"},{"location":"examples/","page":"Examples","title":"Examples","text":"<figure>\n<picture>\n  <source  srcset=\"../assets/ff_sph.png\" width=\"800\">\n  <img alt=\"\" src=\"\" width=\"200\">\n</picture>\n\n  <figcaption>\n    Far-field pattern of the collection of Fitzgerald dipoles.\n  </figcaption>\n</figure>\n<br/>","category":"page"},{"location":"surfacecurrents/surface_examples/#TODO:-generate-content","page":"TODO: generate content","title":"TODO: generate content","text":"","category":"section"},{"location":"operations/transmission/#transmission","page":"Transmission","title":"Transmission between an AntennaFieldRepresentation and a FieldSampling","text":"","category":"section"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"The transmit method can be used to evaluate the probe outputs of a FieldSampling for a given AntennaFieldRepresentation without constructing a TransmitMap first. However, using the transmit method is only recommended if the operation is not called multiple times. In most cases, it is advisable to construct and use a TransmitMap to avoid redundant allocations. ","category":"page"},{"location":"operations/transmission/#transmissionmap","page":"Transmission","title":"TransmitMaps","text":"","category":"section"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"A TransmitMap is constructed via the constructor","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"A = TransmitMap(aut_field::AntennaFieldRepresentation, fieldsampling::Fieldsampling)","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"Here is an example of how to construct a TransmitMap between a SphericalWaveExpansion and a SphericalFieldSampling:","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"using AntennaFieldRepresentations\n\nZ₀=376.730313669;                       # free-space wave impedance\nf= 1.5e9;                               # frequency\nλ = AntennaFieldRepresentations.c₀ / f; # wavelength\nk0 = 2 * pi / λ;                        # wavenumber\n\nsph_coefficients = SphericalCoefficients(ComplexF64.(collect(1:16)))\naut_field = SphericalWaveExpansion(Radiated(),sph_coefficients, k0)\n\nLmax = 2 # maximum mode order is 2 in this example\n\n# spherical coefficients of incident field Hertzian dipole at 1.0m distance\nαinc=AntennaFieldRepresentations.αinc_dipole(1.0, Lmax, k0)\n\nJθ= 2*Lmax + 1;\nJϕ= 2*Lmax + 1;\nsamplingstrategy= RegularθRegularϕSampling(Jθ, Jϕ) \n\nfieldsampling = SphericalFieldSampling(samplingstrategy, αinc);\n\nA=TransmitMap(aut_field, fieldsampling)","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"Depending on the concrete types of the aut_field and the fieldsampling, different types of TransmitMap will be created to implement the most efficient agorithm for the transmission. The following cross table clarifies which type of TransmitMap is created by which pair of input types.","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"  IrregularFieldSampling SphericalFieldSampling\n   \nDipoleArray  MLFMMTransmitMap MLFMMSphericalTransmitMap\nSphericalWaveExpansion  DirectTransmitMap SphericalTransmitMap[1]\nPlaneWaveExpansion  DirectTransmitMap PlaneWaveSphericalTransmitMap[1]\nSurfaceCurrents  MLFMMTransmitMap MLFMMSphericalTransmitMap","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"[1]: A direct (non-iterative) inverse transmit map is available using the inverse() command.","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"As explained in the OperationMaps Chapter of this documentation, each TransmitMap operates as linear map and its adjoint, transpose and inverse map can be constructed via","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"julia>  Aᴴ = adjoint(A)\n16×30 LinearMaps.AdjointMap{ComplexF64} of\n  30×16 SphericalTransmitMap{ComplexF64}\n\njulia>  Aᵀ = transpose(A)\n16×30 LinearMaps.TransposeMap{ComplexF64} of\n  30×16 SphericalTransmitMap{ComplexF64}\n\njulia> A⁻¹ = inverse(A)\n16×30 AntennaFieldRepresentations.InverseSphericalTransmitMap{ComplexF64}","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"note: Note\nNot all types of TransmitMap allow to setup an inverse efficiently. In most cases, a direct inverse is not available but the inverse map is implemented via an iterative solver.  The types of TransmitMap which have a direct inverse available, are annotated with a superscript [1] in the table above.  ","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"Since the different types of TransmitMap represent different algorithms for the computation of the transmission, they have different parameters which may be tuned by the user. The parameters of the TransmitMaps can be changed after an instance of the TransmitMap has been created using the command","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"changeparameters(A::TransmitMap; kwargs...)","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"where the available keyword arguments depend on the concrete type of the TransmitMap","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"Each concrete type of TransmitMap is explained in more detail. The sections briefly describe the underlying algorithms and specify the available keyword arguments to tune the parameters of the underlying algorithms.","category":"page"},{"location":"operations/transmission/#SphericalTransmitMap","page":"Transmission","title":"SphericalTransmitMap","text":"","category":"section"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"The SphericalTransmitMap type calculates the transmission between a SphericalWaveExpansion and a SphericalFieldSampling. It implements the spherical Wacker algorithm which is described in more detail in the electromagnetic theory section.","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"The keyword arguments for changeparameters(A::SphericalTransmitMap; kwargs...) are described in the following table","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"Keyword Argument Short Description\nfirstorder::Bool If true, spherical coefficients of the incident probe field are treated as FirstOrderSphericalCoefficients. A change from false to true drops all entries which correspond to non-first-order modes. A change from true to false replaces non-first-order modes by zeros.\nsamplingstrategy::SphereSamplingStrategy Replace the SphereSamplingStrategy. This effectively creates a new instance of SphericalTransmitMap from scratch.\nincidentcoefficients::AbstractVector Replace the spherical coefficients of the incident probe field by the entries of the input vector. If the SphericalTransmitMap is firstorder, all entries of the input vector which correspond to non-first-order modes are ignored.","category":"page"},{"location":"operations/transmission/#PlaneWaveSphericalTransmitMap","page":"Transmission","title":"PlaneWaveSphericalTransmitMap","text":"","category":"section"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"The PlaneWaveSphericalTransmitMap type calculates the transmission between a PlaneWaveExpansion and a SphericalFieldSampling. It is implemented as a concatination of a PlaneWaveToSphericalMap and a SphericalTransmitMap, i.e., the PlanewaveExpansion is converted into a SphericalWaveExpansion and the transmission is executed as a SphericalTransmitMap.","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"The keyword arguments for changeparameters(A::PlaneWaveSphericalTransmitMap; kwargs...) are described in the following table","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"Keyword Argument Short Description\nfirstorder::Bool If true, spherical coefficients of the incident probe field are treated as FirstOrderSphericalCoefficients. A change from false to true drops all entries which correspond to non-first-order modes. A change from true to false replaces non-first-order modes by zeros.\nsamplingstrategy::SphereSamplingStrategy Replace the SphereSamplingStrategy. This effectively creates a new instance of SphericalTransmitMap from scratch.\nincidentcoefficients::AbstractVector Replace the spherical coefficients of the incident probe field by the entries of the input vector. If the SphericalTransmitMap is firstorder, all entries of the input vector which correspond to non-first-order modes are ignored.","category":"page"},{"location":"operations/transmission/#MLFMMTransmitMap","page":"Transmission","title":"MLFMMTransmitMap","text":"","category":"section"},{"location":"operations/transmission/#MLFMMSphericalTransmitMap","page":"Transmission","title":"MLFMMSphericalTransmitMap","text":"","category":"section"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"The MLFMMSphericalTransmitMaptype calculates the transmission between an AntennaFieldRepresentation based on equivalent currents and a SphericalFieldSampling. In its implementation, the far-field pattern (i.e., a PlaneWaveExpansion) is calculated from the equivalent current representation first. For maximum efficiencyc the source region is hierrchically divided into boxes arranged in an octree. The overall far-field pattern is calculated by aggregating the far-fields of sources in smaller boxes in a MLFMM-scheme. In the second step, the transmission between the calculated PlaneWaveExpansion and the Spherical FieldSampling is calculated through a PlaneWaveSphericalTransmitMap.","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"The keyword arguments for changeparameters(A::MLFMMSphericalTransmitMap; kwargs...) are described in the following table","category":"page"},{"location":"operations/transmission/","page":"Transmission","title":"Transmission","text":"Keyword Argument Short Description\nfirstorder::Bool If true, spherical coefficients of the incident probe field are treated as FirstOrderSphericalCoefficients. A change from false to true drops all entries which correspond to non-first-order modes. A change from true to false replaces non-first-order modes by zeros.\nsamplingstrategy::SphereSamplingStrategy Replace the SphereSamplingStrategy. This effectively creates a new instance of SphericalTransmitMap from scratch.\nincidentcoefficients::AbstractVector Replace the spherical coefficients of the incident probe field by the entries of the input vector. If the SphericalTransmitMap is firstorder, all entries of the input vector which correspond to non-first-order modes are ignored.","category":"page"},{"location":"operations/transmission/#DirectTransmitMap","page":"Transmission","title":"DirectTransmitMap","text":"","category":"section"},{"location":"#AntennaFieldRepresentations.jl","page":"Home","title":"AntennaFieldRepresentations.jl","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"This package contains various representations of the electromagnetic fields radiated by antennas. AntennaFieldRepresentations.jl aims to implement the linear operator between any of the featured antenna representation and a predefined field sampling. By providing the possibility to switch between various antenna field representations, AntennaFieldRepresentations.jl enables the user to choose the most suitable (most efficient) representation for the problem at hand. The purpose of this package is primarily academic and educational.  The package is under heavy development at the moment and represents by no means a finished state. Use with care!","category":"page"},{"location":"","page":"Home","title":"Home","text":"note: Note\nThe package AntennaFieldRepresentations.jl deals with representations of the electromagnetic fields of an antenna at a single frequency.A time convention of mathrme^mathrmjomega t is implicitly assumed for the relevant variables and SI units are implied everywhere.","category":"page"},{"location":"","page":"Home","title":"Home","text":"","category":"page"},{"location":"#Installation","page":"Home","title":"Installation","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The package is not registered in the Julia General Registry, yet, but a future version of this package might. For the time being, you can install the package by switching into the package manager (type ] in the REPL) and run","category":"page"},{"location":"","page":"Home","title":"Home","text":"pkg> add https://github.com/joskna/AntennaFieldRepresentations.jl ","category":"page"},{"location":"#Featured-Antenna-Representations","page":"Home","title":"Featured Antenna Representations","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The following types of antenna representations are provided by AntennaFieldRepresentations:","category":"page"},{"location":"","page":"Home","title":"Home","text":"Collections of short electric and magnetic dipoles\nSpherical Vector-Wave Expansions\nPlane-WaveExpansions\nEquivalent Surface-Currents","category":"page"},{"location":"#Featured-Field-Samplings","page":"Home","title":"Featured Field Samplings","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The following types of field samplings can be used with any antenna representation:","category":"page"},{"location":"","page":"Home","title":"Home","text":"Electric and/or magnetic field components at arbitrary (near-field) locations\nRegular spherical sampling with\nfirst order probes\narbitrary order probes\nIrregularly sampled near-fields using probe antennas with arbitrary receiving patterns","category":"page"},{"location":"#Featured-Operations-on-Antenna-Representations","page":"Home","title":"Featured Operations on Antenna Representations","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The main purpose of AntennaFieldRepresentations.jl is to calculate the interaction between a given antenna under test (AUT) and a predefined field sampling, i.e., to calculate the received signal of probe antennas at predefined positions when the AUT is radiating.","category":"page"},{"location":"","page":"Home","title":"Home","text":"However, the functionality of AntennaFieldRepresentations.jl is not limited to this.  With AntennaFieldRepresentations.jl the user can (besides other useful things)","category":"page"},{"location":"","page":"Home","title":"Home","text":"calculate the near- and far-fields of the AUT at arbitrary positions\nconvert an antenna field representation into a representation of different type\nconvert an antenna field representation into a representation of the same type in a different coordinate system (the new coordinate system may be rotated or translated from the original coordinate system)\nevaluate the transposed, Hermitian, and inverses of most featured linear operators\ncalculate the expansion coefficients of an antenna representation given a field sampling and the received signals (i.e, solve a source reconstruction problem)\naccelerate the evaluation of the interaction operator beween suitable antenna representations and field samplings by means of the multilevel fast multipole method","category":"page"},{"location":"#Known-Issues","page":"Home","title":"Known Issues","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Resampling works only if for every sampling point in the target SphereSamplingStrategy the point on the opposite side of the sphere is also included in the sampling.\nResampling only works if the original SphereSamplingStrategy is a GaussLegendreθRegularϕSampling with an even number of ϕ-samples","category":"page"},{"location":"operations/fields/#Field-Evaluations","page":"Field Evaluations","title":"Field Evaluations","text":"","category":"section"},{"location":"operations/fields/#Electric-and-Magnetic-Field-at-Given-Location","page":"Field Evaluations","title":"Electric and Magnetic Field at Given Location","text":"","category":"section"},{"location":"operations/fields/#Far-Fields","page":"Field Evaluations","title":"Far Fields","text":"","category":"section"}]
}
