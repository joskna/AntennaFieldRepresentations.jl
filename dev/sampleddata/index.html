<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Spherically Sampled Data Structures · AntennaFieldRepresentations.jl</title><meta name="title" content="Spherically Sampled Data Structures · AntennaFieldRepresentations.jl"/><meta property="og:title" content="Spherically Sampled Data Structures · AntennaFieldRepresentations.jl"/><meta property="twitter:title" content="Spherically Sampled Data Structures · AntennaFieldRepresentations.jl"/><meta name="description" content="Documentation for AntennaFieldRepresentations.jl."/><meta property="og:description" content="Documentation for AntennaFieldRepresentations.jl."/><meta property="twitter:description" content="Documentation for AntennaFieldRepresentations.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img class="docs-light-only" src="../assets/logo.svg" alt="AntennaFieldRepresentations.jl logo"/><img class="docs-dark-only" src="../assets/logo-dark.svg" alt="AntennaFieldRepresentations.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">AntennaFieldRepresentations.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Antenna Field Representations</span><ul><li><a class="tocitem" href="../fieldrepresentations/">General Field Representation Interface</a></li><li><a class="tocitem" href="../dipoles/dipole_representations/">Dipole Representations</a></li><li><a class="tocitem" href="../spherical/spherical_representations/">Spherical Mode Representations</a></li><li><a class="tocitem" href="../planewaves/planewave_representations/">Plane Wave Representations</a></li><li><a class="tocitem" href="../surfacecurrents/surface_representations/">Equivalent Surface Currents</a></li></ul></li><li><span class="tocitem">Field Samplings</span><ul><li><a class="tocitem" href="../sampling/fieldsamplings/">General Field Sampling Interface</a></li><li><a class="tocitem" href="../sampling/irregularsampling/">Irregularly Distributed Field Samplings</a></li><li><a class="tocitem" href="../sampling/sphericalsampling/">Spherical Field Samplings</a></li></ul></li><li class="is-active"><a class="tocitem" href>Spherically Sampled Data Structures</a><ul class="internal"><li><a class="tocitem" href="#regularspheresampling"><span><code>RegularθRegularϕSampling</code></span></a></li><li><a class="tocitem" href="#gausslegendresampling"><span><code>GaussLegendreθRegularϕSampling</code></span></a></li></ul></li><li><span class="tocitem">Operations</span><ul><li><a class="tocitem" href="../operations/operationmaps/">OperationMaps</a></li><li><a class="tocitem" href="../operations/coordinate_trafos/">Coordinate Transformations</a></li><li><a class="tocitem" href="../operations/conversions/">Conversion into Other Field Representations</a></li><li><a class="tocitem" href="../operations/transmission/">Transmission</a></li><li><a class="tocitem" href="../operations/interpolation/">Interpolation</a></li></ul></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><span class="tocitem">(Electromagnetic) Theory</span><ul><li><a class="tocitem" href="../dipoles/dipole_theory/">Dipoles</a></li><li><a class="tocitem" href="../spherical/spherical_theory/">Spherical Vector Wave Expansion</a></li><li><a class="tocitem" href="../planewaves/planewave_theory/">Plane Wave Expansion</a></li><li><a class="tocitem" href="../surfacecurrents/surface_theory/">Equivalent Surface Currents</a></li><li><input class="collapse-toggle" id="menuitem-7-5" type="checkbox"/><label class="tocitem" for="menuitem-7-5"><span class="docs-label">Fast Algorithms</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../spherical/spherical_fast/">Spherical Wacker Algorithm</a></li><li><a class="tocitem" href="../mlfmm/mlfmm_theory/">Multilevel Fast Multipole Method</a></li></ul></li><li><a class="tocitem" href="../operations/interpolation_theory/">Interpolation of Spherically Sampled Data</a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Spherically Sampled Data Structures</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Spherically Sampled Data Structures</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="spheresampling"><a class="docs-heading-anchor" href="#spheresampling">Spherically Sampled Data Structures</a><a id="spheresampling-1"></a><a class="docs-heading-anchor-permalink" href="#spheresampling" title="Permalink"></a></h1><p>In <code>AntennaFieldRepresentations.jl</code>, several data structures represent functions <span>$\bm{f}(\vartheta, \varphi)$</span> which are sampled on a sphere at certain sampling points <span>$(\vartheta_i, \varphi_i)$</span>. Examples for spherically sampled data structures are <a href="../api/#AntennaFieldRepresentations.PlaneWaveExpansion"><code>PlaneWaveExpansion</code></a>s or <a href="../api/#AntennaFieldRepresentations.SphericalFieldSampling"><code>SphericalFieldSampling</code></a>s. </p><p>A natural choice for the sampling points <span>$(\vartheta_i, \varphi_i)$</span> is to choose a tensor product of 1D samplings along <span>$\vartheta$</span> and <span>$\varphi$</span>, resepectively, i.e., by defining <span>$N_\vartheta$</span> sampling points <span>$\vartheta_m$</span> along <span>$\vartheta$</span> and <span>$N_\varphi$</span> sampling points <span>$\varphi_n$</span> along <span>$\varphi$</span>, we end up with <span>$N_\vartheta \times N_\varphi$</span> pairs <span>$(\vartheta_m, \varphi_n)$</span> which define the sampling points on the sphere.</p><p>Internally, the data can be stored in a matrix<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup>, where the <span>$m$</span>th row corresponds the angle <span>$\vartheta_m$</span> and the <span>$n$</span>th coloumn corresponds to the angle <span>$\varphi_n$</span>. The <span>$m, n$</span>- entry of the matrix therefore corresponds to the function value <span>$\bm{f}(\vartheta_m, \varphi_n)$</span>.</p><p>Different choices for the distribution of sampling locations may have application specific benefits or drawbacks. To enable the users to use the most suitable choice for their problem at hand, several different sampling distributions are implemented in <code>AntennaFieldRepresentations.jl</code>. The values of the sampling angles are defined by a <a href="../api/#AntennaFieldRepresentations.SphereSamplingStrategy"><code>SphereSamplingStrategy</code></a> object. </p><p>Each spherically sampled data structure contains a <code>SphereSamplingStrategy</code> object such that we know which sampling locations <span>$(\vartheta_m, \varphi_n)$</span> correspond to the matrix entries.</p><p>The following <code>SphereSamplingStrategy</code>s are implemented in <code>AntennaFieldRepresentations.jl</code>:</p><h2 id="regularspheresampling"><a class="docs-heading-anchor" href="#regularspheresampling"><code>RegularθRegularϕSampling</code></a><a id="regularspheresampling-1"></a><a class="docs-heading-anchor-permalink" href="#regularspheresampling" title="Permalink"></a></h2><p>Objects with a <code>RegularθRegularϕSampling</code> are sampled along <span>$\varphi$</span> with <span>$N_\varphi$</span> equally distributed samples  in <span>$0\leq \varphi &lt; 2\pi$</span> and along <span>$\vartheta$</span> with <span>$N_\vartheta$</span> equally distributed samples  in <span>$0\leq \varphi \leq \pi$</span>.</p><p>We have </p><ul><li><span>$\vartheta_m = (m-1)\, \Delta\vartheta$</span> with <span>$m=1,\ldots,N_\vartheta$</span> </li><li><span>$\varphi_n = (n-1)\, \Delta\varphi$</span> with <span>$n=1,\ldots,N_\varphi$</span></li></ul><p>The sampling steps <span>$\Delta\vartheta = 2\pi / J_\vartheta$</span> and <span>$\Delta\varphi = 2\pi / J_\varphi$</span> must be whole-number fractions of <span>$2\pi$</span> to guarantee that the sampling step between the two samples at the end of a <span>$\varphi$</span>-ring or a <span>$\vartheta$</span> ring is the same as everywhere else. This is enforced during the construction of a <code>RegularθRegularϕSampling</code> as the whole-number divisors <span>$J_\vartheta$</span> and <span>$J_\varphi$</span> are the input arguments for the constructor.</p><p>To generate a <code>RegularθRegularϕSampling</code> struct, use the following constructor</p><pre><code class="language-julia hljs">RegularθRegularϕSampling(Jθ::Integer, Jϕ::Integer)</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>You can define a <code>RegularθRegularϕSampling</code> with <span>$N_\vartheta$</span> samples along <span>$\vartheta$</span> by either specifying <span>$J_\vartheta = 2 N_\vartheta$</span> or <span>$J_\vartheta = 2 N_\vartheta + 1$</span>. The difference is that <span>$\Delta \vartheta$</span> is different for the two choices, such that the last <span>$\vartheta$</span>-sample will either coincide with <span>$\vartheta_{N_\vartheta} = \pi$</span> or with <span>$\vartheta_{N_\vartheta} = \pi - \Delta \vartheta /2$</span>.   </p></div></div><hr/><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>A <code>RegularθRegularϕSampling</code> has always multiple samples at the North Pole (one sample per <span>$\varphi$</span>-value). However, only <code>RegularθRegularϕSampling</code>s with even values for <span>$J_\vartheta$</span> also feature samples at the South Pole. Odd values for <span>$J_\vartheta$</span> lead to no samples at the South Pole.</p></div></div><hr/><p>While local and even global interpolation is easy and efficient with a <code>RegularθRegularϕSampling</code>, the drawback is that evaluating spherical integrals is more costly as compared to a <code>GaussLegendreθRegularϕSampling</code>.</p><h2 id="gausslegendresampling"><a class="docs-heading-anchor" href="#gausslegendresampling"><code>GaussLegendreθRegularϕSampling</code></a><a id="gausslegendresampling-1"></a><a class="docs-heading-anchor-permalink" href="#gausslegendresampling" title="Permalink"></a></h2><p>Objects with a <code>GaussLegendreθRegularϕSampling</code> are sampled along <span>$\varphi$</span> with <span>$N_\varphi$</span> equally distributed samples  in <span>$0\leq \varphi &lt; 2\pi$</span> and <span>$N_\vartheta$</span> <span>$\vartheta$</span>-samples on a Gauß-Legendre based grid with <span>$0&lt; \vartheta &lt; \pi$</span>, according to</p><ul><li><span>$\vartheta_k=\text{arccos}(-x_k)$</span></li></ul><p>where <span>$x_k$</span> are the roots of the <span>$N_\vartheta$</span>th Legendre polynomial</p><ul><li><span>$\varphi_n = (n-1)\, \Delta\varphi$</span> with <span>$n=1,\ldots,N_\varphi$</span></li></ul><p>The sampling choice naturally leads to an accurate integration rule over the complete Ewald sphere </p><p class="math-container">\[\oiint f(\hat{\bm{k}}) \, \mathrm{d}^2 \hat{\bm{k}} 
= 
\int \limits_{0}^{2\pi} \int \limits_{0}^{\pi} \, f(\vartheta, \varphi) \, \sin{\vartheta}\, \mathrm{d}\vartheta
\mathrm{d} \varphi 
\approx 
\sum \limits_{i=1}^{N_\varphi} \sum \limits_{k=1}^{N_\vartheta} \dfrac{2\pi}{N_\varphi}
w_k\, f(\vartheta_k, \varphi_i)\]</p><p>where <span>$w_k$</span> are the Gauß-Legendre quadrature weights. The calculation of the Gauß-Legendre quadrature weights <span>$w_k$</span> and quadrature nodes <span>$x_k$</span> is efficiently implemented (to compute the <span>$N_\vartheta$</span>-point Gauß quadrature nodes and weights to 16-digit accuracy takes <span>$\mathcal{O}(N_\vartheta)$</span> time <sup class="footnote-reference"><a id="citeref-2" href="#footnote-2">[2]</a></sup>) in the Julia package <a href="https://juliaapproximation.github.io/FastGaussQuadrature.jl/stable/"><code>FastGaussQuadrature.jl</code></a>.</p><p>To generate a <code>GaussLegendreθRegularϕSampling</code> struct, use the following constructor</p><pre><code class="language-julia hljs">GaussLegendreθRegularϕSampling(Nθ::Integer, Nϕ::Integer)</code></pre><p>where <code>Nθ</code> corresponds to the stored number of samples in <span>$\vartheta$</span>-direction and <code>Nϕ</code> corresponds to the number of samples in <span>$\varphi$</span> direction.</p><p>The two different <code>SphereSamplingStrategy</code>s are illustrated below for reference.</p><figure>
<picture>
  <source media="(prefers-color-scheme: dark)" srcset="../assets/compare_sampling_darkmode.svg" width="750">
  <source media="(prefers-color-scheme: light)" srcset="../assets/compare_sampling_darkmode.svg" width="750" >
  <img alt="" src="" width="200">
</picture>

  <figcaption>
    Illustration of different SphereSamplingStrategys. Grid points are marked by orange dots and the blue lines correspond to a RegularθRegularϕSampling for reference.  <br/>  <br/>  
    Left: RegularθRegularϕSampling with Jϕ = Jθ = 16, Right: GaussLegendreθRegularϕSampling with Nϕ = 16 and Nθ=8. 
  </figcaption>
</figure>
<br/><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>or multiple matrices, if the function <span>$\bm{f}(\vartheta, \varphi)$</span> is a vector function containing e.g., data for two polarizations</li><li class="footnote" id="footnote-2"><a class="tag is-link" href="#citeref-2">2</a>I. Bogaert, Iteration-free computation of Gauss–Legendre quadrature nodes and weights, SIAM J.ournal on Scientific Computing, Vol. 36, No. 3, pp. A1008–A1026, 2014 <a href="https://doi.org/10.1137/140954969">DOI. 10.1137/140954969</a></li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../sampling/sphericalsampling/">« Spherical Field Samplings</a><a class="docs-footer-nextpage" href="../operations/operationmaps/">OperationMaps »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Tuesday 28 January 2025 22:32">Tuesday 28 January 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
